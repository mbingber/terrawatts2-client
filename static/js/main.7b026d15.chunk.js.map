{"version":3,"sources":["assets/resources/coal.png","assets/resources/oil.png","assets/sounds/boop.mp3","assets/resources sync /^/.//.*/.png$","assets/resources/trash.png","assets/resources/uranium.png","assets/resources/wind.png","assets/trophy.svg","components/cities/Connections.tsx","graphql/resourcesFragment.ts","graphql/gameStateFragment.ts","graphql/gameFragment.ts","graphql/gameQuery.ts","generatedTypes.ts","hooks/useGame.ts","components/cities/CityIcon.tsx","constants.ts","components/cities/CityMarker.tsx","graphql/getCurrentUser.ts","hooks/useMe.ts","components/cities/mapConfig.ts","hooks/useResourceCart.ts","hooks/useCityCart.ts","logic/cities.ts","hooks/usePowerCart.ts","components/CartsContext.tsx","hooks/usePlantCart.ts","hooks/useDiscardCart.ts","components/cities/tileUrl.ts","components/cities/GameMap.tsx","components/resources/ResourceIcon.tsx","logic/resources.ts","components/resources/Incrementer.tsx","components/resources/ResourceDial.tsx","hooks/useActionOnMe.ts","graphql/plantsQuery.ts","hooks/usePlantGetter.tsx","components/resources/ResourceMarket.tsx","components/plants/PlantCard.tsx","components/plants/PlantList.tsx","components/plants/PlantMarket.tsx","components/plants/PlantsTabs.tsx","components/PlayerBox.tsx","hooks/useGameMutation.ts","graphql/putUpPlantMutation.ts","components/action-panel/PutUpPlantPanel.tsx","graphql/bidOnPlantMutation.ts","components/action-panel/AuctionPanel.tsx","graphql/buyResourcesMutation.ts","components/action-panel/BuyResourcesPanel.tsx","graphql/buyCitiesMutation.ts","components/action-panel/BuyCitiesPanel.tsx","graphql/getRevenuesQuery.ts","graphql/powerUpMutation.ts","components/action-panel/PowerUpPanel.tsx","logic/power.ts","components/action-panel/WaitingPanel.tsx","graphql/discardPlantMutation.ts","components/action-panel/DiscardPlantPanel.tsx","components/action-panel/ActionPanel.tsx","components/auth/SpectatorNotification.tsx","graphql/getGameOverDataQuery.ts","components/game-end/GameEndModal.tsx","hooks/useGameOverData.ts","components/SummaryBar.tsx","hooks/usePing.ts","graphql/keepMeOnlineMutation.ts","hooks/useKeepMeOnline.ts","graphql/gameStateUpdatedSubscription.ts","components/Game.tsx","hooks/useGameState.ts","graphql/createUserMutation.ts","graphql/loginMutation.ts","components/auth/useLogin.ts","components/auth/Signup.tsx","components/auth/Login.tsx","graphql/getOnlineUsernamesQuery.ts","graphql/createGameMutation.ts","graphql/getMyRecentGamesQuery.ts","components/home/Home.tsx","components/home/Navbar.tsx","graphql/setUserPreferencesMutation.ts","components/home/Profile.tsx","graphql/mapQuery.ts","graphql/saveMapMutation.ts","components/cities/MapEditor.tsx","App.tsx","client.ts","index.tsx"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","Connections","cityLookup","connections","Fragment","connection","cities","midpoint","lat","lng","key","Polyline","positions","c","color","weight","dashArray","lineCap","dashOffset","Marker","position","icon","divIcon","html","renderToString","ConnectionBubble","cost","iconSize","styled","div","ResourcesFragment","gql","GameStateFragment","GameFragment","Phase","ActionType","Color","PlantResourceType","GAME_QUERY","useGameQuery","gameId","useQuery","variables","useGame","useParams","loading","error","data","getGame","CityIcon","height","empty","number","strokeWidth","Container","width","viewBox","d","stroke","fill","x","y","textAnchor","alignmentBaseline","dominantBaseline","style","fontSize","Arrow","x1","y1","x2","y2","resourceColors","COAL","OIL","TRASH","URANIUM","WIND","HYBRID","resourceColorFilters","playerColors","RED","YELLOW","GREEN","BLUE","PURPLE","BLACK","noop","CityMarker","city","colors","era","isSelected","selectedColor","onClick","hasNuclearPower","isDraggable","onDragEnd","iconHtml","debouncedOnClick","useDebouncedCallback","className","draggable","target","_latlng","ex","City","redden","name","Array","_","idx","length","GET_CURRENT_USER_QUERY","useMe","game","getCurrentUser","username","state","playerOrder","find","player","configs","USA","center","minZoom","maxZoom","maxBounds","Germany","Italy","Seattle","getMapConfig","mapName","emptyCart","coal","oil","trash","uranium","useCityCart","cityCostHelper","me","useState","cityIds","setCityCart","addToCart","info","phase","POWER","myTurnOrder","findIndex","p","activeTurnOrder","activeUser","CITY","cityList","ci","cityId","occupants","some","removeFromCart","filter","cartId","cart","costHelper","remainingPurchaseIds","slice","network","cityInstance","connectionCost","push","minPurchaseCost","Infinity","cheapestPurchaseId","forEach","purchaseId","costsToNetwork","ownedId","cheapestPath","Math","min","occupancyCost","reduce","acc","calculateCityCost","JSON","parse","useEffect","citiesToRemove","toggleInCart","includes","clearCart","usePowerCart","plants","setPlants","actionType","togglePlant","plant","removePlant","addPlant","CartsContext","React","createContext","plantCart","resourceCart","cityCart","powerCart","discardCart","CartsContextProvider","children","carts","selectedPlant","setSelectedPlant","usePlantCart","resources","setCart","setResource","resourceType","inCart","useResourceCart","useDiscardCart","Provider","value","tileUrl","GameMap","useContext","useMemo","colorsLookup","zoom","attributionControl","zoomControl","zoomSnap","zoomDelta","TileLayer","url","region","ResourceIcon","type","withColor","HybridContainer","Image","src","require","toLowerCase","img","getSingleResourceCost","quantity","floor","getTotalResourceCost","market","purchase","marketCopy","purchaseCopy","rt","hasPlantForResource","getPlant","plantIds","plantId","isHybridPlant","isCoalOrOil","typeMatches","toUpperCase","getResourceCapacity","resourceBurn","canFitOneMoreResource","money","resourceCapacity","resourcesAfterPurchase","r","i","canFitResources","Incrementer","setValue","disablePlus","MinusButton","disabled","Value","PlusButton","buttonStyles","css","button","ResourceDial","inStock","restockRates","setInCart","showIncrementor","numDivisions","maxStock","ratio","ratioAdjusted","startAngle","PI","endAngle","ratioAngle","ratioAdjustedAngle","drawArc","angle","innerStartX","cos","innerStartY","sin","outerStartX","outerStartY","outerEndX","outerEndY","innerEndX","innerEndY","largeAngleSweep","drawLine","isMinor","outerRForLine","innerR","amountForCost","IconAndPrice","Dot","Price","RestockRates","rate","SvgContainer","primaryColor","C","lighten","hex","getSecondaryResourceColor","groupAngle","ActionPanel","useActionOnMe","auction","BID_ON_PLANT","active","PLANTS_QUERY","Context","PlantProvider","plantsMap","fetchPlants","usePlantGetter","ResourceMarket","actionOnMe","BUY_RESOURCES","getRatesForResource","era1","era2","era3","rates","resourceMarket","PlantCard","props","we","rankDisplay","rank","resourceStack","ResourceStack","fontWeight","numCities","PlantList","isAvailable","hoverable","handlePlantClick","emptyPlantIds","Plants","PlantContainer","available","PlantFrame","PlantMarket","plantMarket","getPlants","PUT_UP_PLANT","reverse","sort","a","b","PlantsTabs","deckCount","discardedPlants","era3Plants","possibleDeck","panes","menuItem","render","Tab","PlayerBox","isMe","plantPhaseEvents","powerActionOnMe","POWER_UP","discardActionOnMe","DISCARD_PLANT","plantEvent","is2P","plantsOrFrames","resourceDisplay","owned","isPlantSelectable","isPlantSelected","adjustedMoney","adjustedCities","PLANT","PlantEventNotifier","event","getPlantEventText","Name","MoneyAndCities","NumberStrikethrough","struck","abs","BottomSection","LeftColumn","selectable","RightColumn","ResourceContainer","useGameMutation","mutation","onCompleted","useMutation","onError","toast","message","PUT_UP_PLANT_MUTATION","PutUpPlantPanel","putUpPlant","isPassState","setIsPass","bid","setBid","handleSubmit","isPass","ceil","Button","primary","Input","onChange","newBid","Number","step","turn","secondary","BID_ON_PLANT_MUTATION","AuctionPanel","players","bidOnPlant","isAutobid","setAutobid","bidIsDisabled","clockwiseOrder","getRelativeOrder","auctionOrder","every","passed","handleBidSubmit","index","numRemaining","theta","R","theta0","xName","yName","xBid","yBid","textRotation","isActive","isLeading","leader","transform","PlantSpacer","BidForm","Checkbox","label","checked","Group","vertical","BUY_RESOURCES_MUTATION","BuyResourcesPanel","buyResources","cartCost","BUY_CITIES_MUTATION","BuyCitiesPanel","BUY_CITIES","buyCities","cityNames","displayedCost","buttonText","List","cityName","ButtonContainer","GET_REVENUES_QUERY","POWER_UP_MUTATION","PowerUpPanel","powerUp","numPowered","myName","powerCapacity","getNumCitiesPowered","earnings","getRevenues","hasResources","resourcesNeeded","resourcesCopy","numResources","rLower","hasEnoughResources","hybridChoices","myCoal","myOil","hybridNeeded","hybridChoice","getHybridChoices","hybridChoiceIdx","setHybridChoiceIdx","choice","HybridChoice","actionTypeToText","WaitingPanel","text","Text","DISCARD_PLANT_MUTATION","DiscardPlantPanel","discardPlant","resourceLoss","discardedPlant","plantsAfterDiscard","newCapacity","max","amount","getResourceLoss","loss","isOver","SpectatorNotification","dismissed","setDismissed","to","GET_GAME_OVER_DATA_QUERY","messages","China","sum","nums","GameEndModal","useGameOverData","getGameOverData","winOrder","Modal","size","defaultOpen","trigger","Icon","Message","Player","PlayerName","won","Trophy","PlayerStats","Money","spendData","RESOURCE","h2","span","attrs","SummaryBar","era2Start","gameEnd","phaseText","revenues","useSound","boopSfx","playSound","isMuted","setMuted","usePing","Content","InnerModal","PowerInfo","KEEP_ME_ONLINE_MUTATION","useKeepMeOnline","keepMeOnline","interval","setInterval","clearInterval","GAME_STATE_SUBSCRIPTION","Game","subscribeToMore","document","updateQuery","prev","subscriptionData","console","log","gameStateUpdated","useGameState","PlayerBoxContainer","PlantResourceContainer","CREATE_USER_MUTATION","LOGIN_MUTATION","useLogin","errorCallback","history","useHistory","URLSearchParams","useLocation","search","get","login","token","Cookies","set","path","Signup","setUsername","password","setPassword","confirmPassword","setConfirmPassword","errored","setErrored","loginLoading","createUser","signup","signupLoading","Box","placeholder","Disclaimer","LoginForm","onKeyDown","handleKeyDown","ButtonGroup","GET_ONLINE_USERNAMES_QUERY","CREATE_GAME_MUTATION","GET_MY_RECENT_GAMES_QUERY","Home","currentUserData","recentGamesData","pollInterval","createGame","startGame","gameLoading","gameName","setGameName","gamePlayers","setGamePlayers","selectedMap","setSelectedMap","mapDropdownOptions","Segment","horizontal","raised","Header","getMyRecentGames","Card","Description","Meta","join","Dropdown","selection","options","defaultValue","playerName","Buddy","removePlayer","usernames","getOnlineUsernames","Navbar","isLoggedIn","Menu","Item","remove","window","location","reload","SET_USER_PREFERENCES_MUTATION","Profile","saveUserPreferences","preferredColor","setSelectedColor","energy","setEnergy","dropdownOptions","selected","clearable","MAP_QUERY","SAVE_MAP_MUTATION","MapEditorBase","setState","isSaved","setIsSaved","saveMap","TopRight","changes","localCity","mapInput","cityInput","MapEditor","fetchMap","App","exact","httpLink","HttpLink","uri","credentials","wsLink","WebSocketLink","reconnect","authLink","setContext","headers","authorization","link","split","query","definition","getMainDefinition","kind","operation","concat","client","ApolloClient","cache","InMemoryCache","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.7b026d15.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/oil.9fac5c6f.png\";","module.exports = __webpack_public_path__ + \"static/media/boop.b1ac9adc.mp3\";","var map = {\n\t\"./coal.png\": 222,\n\t\"./oil.png\": 223,\n\t\"./trash.png\": 349,\n\t\"./uranium.png\": 350,\n\t\"./wind.png\": 351\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 348;","module.exports = __webpack_public_path__ + \"static/media/trash.a2636ebc.png\";","module.exports = __webpack_public_path__ + \"static/media/uranium.4393d723.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY2NTk3NTFCNDMxNzExRTA4NzdFQjFFM0RGOTE4NTczIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY2NTk3NTFDNDMxNzExRTA4NzdFQjFFM0RGOTE4NTczIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjY1OTc1MTk0MzE3MTFFMDg3N0VCMUUzREY5MTg1NzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjY1OTc1MUE0MzE3MTFFMDg3N0VCMUUzREY5MTg1NzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6n133RAAAZmElEQVR42uydCZhV1ZHH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\"","module.exports = __webpack_public_path__ + \"static/media/trophy.661c17c4.svg\";","import React from \"react\";\nimport { renderToString } from \"react-dom/server\";\nimport { Marker, Polyline } from \"react-leaflet\";\nimport { divIcon } from \"leaflet\";\nimport { FetchMap_fetchMap_cities, FetchMap_fetchMap_connections} from \"../../generatedTypes\";\nimport styled from \"styled-components\";\n\ninterface ConnectionsProps {\n  cityLookup: Record<string, FetchMap_fetchMap_cities>;\n  connections: FetchMap_fetchMap_connections[];\n}\n\nexport const Connections: React.FC<ConnectionsProps> = ({ cityLookup, connections }) => {\n  return (\n    <React.Fragment>\n      {connections.map((connection) => {\n        const cities = connection.cities.map(({ id }) => cityLookup[id]);\n\n        const midpoint = {\n          lat: 0.5 * (cities[0].lat + cities[1].lat),\n          lng: 0.5 * (cities[0].lng + cities[1].lng),\n        };\n\n        return (\n          <div key={connection.id}>\n            <Polyline\n              positions={cities.map(c => ({ lat: c.lat, lng: c.lng }))}\n              color=\"#333\"\n              weight={3}\n              dashArray=\"20\"\n              lineCap=\"butt\"\n            />\n            <Polyline\n              positions={cities.map(c => ({ lat: c.lat, lng: c.lng }))}\n              color=\"#bbb\"\n              weight={3}\n              dashArray=\"20\"\n              dashOffset=\"20\"\n              lineCap=\"butt\"\n            />\n            <Marker\n              position={midpoint}\n              icon={divIcon({\n                html: renderToString(<ConnectionBubble>{connection.cost}</ConnectionBubble>),\n                iconSize: [20, 20]\n              })}\n            />\n          </div>\n        );\n      })}\n    </React.Fragment>\n  );\n}\n\nconst ConnectionBubble = styled.div`\n  height: 20px;\n  width: 20px;\n  border-radius: 20px;\n  background-color: #333;\n  color: #ddd;\n  font-size: 12px;\n  text-align: center;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n","import gql from \"graphql-tag\";\n\nexport const ResourcesFragment = gql`\n  fragment Resources on Resources {\n    coal\n    oil\n    trash\n    uranium\n  }\n`;\n","import gql from 'graphql-tag';\nimport { ResourcesFragment } from './resourcesFragment';\n\nexport const GameStateFragment = gql`\n  fragment GameState on GameState {\n    info {\n      turn\n      era\n      phase\n      actionType\n      activeUser\n    }\n    resourceMarket {\n      ...Resources\n    }\n    playerOrder {\n      clockwiseOrder\n      username\n      color\n      money\n      resources {\n        ...Resources\n      }\n      plantIds\n    }\n    plantMarket\n    era3Plants\n    discardedPlants\n    possibleDeck\n    deckCount\n    cityList {\n      cityId\n      occupants\n    }\n    auction {\n      plantId\n      bid\n      leader\n      active\n      passed\n    }\n    plantPhaseEvents {\n      plantId\n      cost\n      username\n    }\n    isOver\n  }\n\n  # Fragments\n  ${ResourcesFragment}\n`;","import gql from \"graphql-tag\";\nimport { ResourcesFragment } from \"./resourcesFragment\";\nimport { GameStateFragment } from \"./gameStateFragment\";\n\nexport const GameFragment = gql`\n  fragment Game on Game {\n    id\n    map {\n      id\n      name\n      cities {\n        id\n        name\n        lat\n        lng\n        region\n      }\n      connections {\n        id\n        cost\n        cities {\n          id\n        }\n      }\n    }\n    regions\n    restockRates {\n      era1 {\n        ...Resources\n      }\n      era2 {\n        ...Resources\n      }\n      era3 {\n        ...Resources\n      }\n    }\n    era2Start\n    gameEnd\n    cityCostHelper\n    state {\n      ...GameState\n    }\n  }\n\n  # Fragments\n  ${ResourcesFragment}\n  ${GameStateFragment}\n`;","import gql from \"graphql-tag\";\nimport { GameFragment } from \"./gameFragment\";\n\nexport const GAME_QUERY = gql`\n  query GetGame($id: ID!) {\n    getGame(id: $id) {\n      ...Game\n    }\n  }\n\n  # Fragments\n  ${GameFragment}\n`;\n","\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: BidOnPlant\n// ====================================================\n\nexport interface BidOnPlant_bidOnPlant_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface BidOnPlant_bidOnPlant_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface BidOnPlant_bidOnPlant_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface BidOnPlant_bidOnPlant_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: BidOnPlant_bidOnPlant_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface BidOnPlant_bidOnPlant_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface BidOnPlant_bidOnPlant_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface BidOnPlant_bidOnPlant_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface BidOnPlant_bidOnPlant {\n  info: BidOnPlant_bidOnPlant_info;\n  resourceMarket: BidOnPlant_bidOnPlant_resourceMarket;\n  playerOrder: BidOnPlant_bidOnPlant_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: BidOnPlant_bidOnPlant_cityList[];\n  auction: BidOnPlant_bidOnPlant_auction | null;\n  plantPhaseEvents: BidOnPlant_bidOnPlant_plantPhaseEvents[];\n  isOver: boolean;\n}\n\nexport interface BidOnPlant {\n  bidOnPlant: BidOnPlant_bidOnPlant;\n}\n\nexport interface BidOnPlantVariables {\n  gameId: string;\n  bid?: number | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: BuyCities\n// ====================================================\n\nexport interface BuyCities_buyCities_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface BuyCities_buyCities_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface BuyCities_buyCities_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface BuyCities_buyCities_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: BuyCities_buyCities_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface BuyCities_buyCities_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface BuyCities_buyCities_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface BuyCities_buyCities_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface BuyCities_buyCities {\n  info: BuyCities_buyCities_info;\n  resourceMarket: BuyCities_buyCities_resourceMarket;\n  playerOrder: BuyCities_buyCities_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: BuyCities_buyCities_cityList[];\n  auction: BuyCities_buyCities_auction | null;\n  plantPhaseEvents: BuyCities_buyCities_plantPhaseEvents[];\n  isOver: boolean;\n}\n\nexport interface BuyCities {\n  buyCities: BuyCities_buyCities;\n}\n\nexport interface BuyCitiesVariables {\n  gameId: string;\n  cityIds: string[];\n  cost: number;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: BuyResources\n// ====================================================\n\nexport interface BuyResources_buyResources_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface BuyResources_buyResources_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface BuyResources_buyResources_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface BuyResources_buyResources_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: BuyResources_buyResources_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface BuyResources_buyResources_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface BuyResources_buyResources_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface BuyResources_buyResources_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface BuyResources_buyResources {\n  info: BuyResources_buyResources_info;\n  resourceMarket: BuyResources_buyResources_resourceMarket;\n  playerOrder: BuyResources_buyResources_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: BuyResources_buyResources_cityList[];\n  auction: BuyResources_buyResources_auction | null;\n  plantPhaseEvents: BuyResources_buyResources_plantPhaseEvents[];\n  isOver: boolean;\n}\n\nexport interface BuyResources {\n  buyResources: BuyResources_buyResources;\n}\n\nexport interface BuyResourcesVariables {\n  gameId: string;\n  resources: ResourcesInput;\n  cost: number;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: CreateGame\n// ====================================================\n\nexport interface CreateGame {\n  createGame: string;\n}\n\nexport interface CreateGameVariables {\n  mapName: string;\n  usernames: string[];\n  name?: string | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: CreateUser\n// ====================================================\n\nexport interface CreateUser_createUser {\n  id: string;\n}\n\nexport interface CreateUser {\n  createUser: CreateUser_createUser | null;\n}\n\nexport interface CreateUserVariables {\n  username: string;\n  password: string;\n  we: boolean;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: DiscardPlant\n// ====================================================\n\nexport interface DiscardPlant_discardPlant_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface DiscardPlant_discardPlant_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface DiscardPlant_discardPlant_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface DiscardPlant_discardPlant_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: DiscardPlant_discardPlant_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface DiscardPlant_discardPlant_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface DiscardPlant_discardPlant_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface DiscardPlant_discardPlant_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface DiscardPlant_discardPlant {\n  info: DiscardPlant_discardPlant_info;\n  resourceMarket: DiscardPlant_discardPlant_resourceMarket;\n  playerOrder: DiscardPlant_discardPlant_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: DiscardPlant_discardPlant_cityList[];\n  auction: DiscardPlant_discardPlant_auction | null;\n  plantPhaseEvents: DiscardPlant_discardPlant_plantPhaseEvents[];\n  isOver: boolean;\n}\n\nexport interface DiscardPlant {\n  discardPlant: DiscardPlant_discardPlant;\n}\n\nexport interface DiscardPlantVariables {\n  gameId: string;\n  plantId: string;\n  hybridChoice?: HybridChoiceInput | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL query operation: GetGame\n// ====================================================\n\nexport interface GetGame_getGame_map_cities {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  region: number;\n}\n\nexport interface GetGame_getGame_map_connections_cities {\n  id: string;\n}\n\nexport interface GetGame_getGame_map_connections {\n  id: string;\n  cost: number;\n  cities: GetGame_getGame_map_connections_cities[];\n}\n\nexport interface GetGame_getGame_map {\n  id: string;\n  name: string;\n  cities: GetGame_getGame_map_cities[];\n  connections: GetGame_getGame_map_connections[];\n}\n\nexport interface GetGame_getGame_restockRates_era1 {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface GetGame_getGame_restockRates_era2 {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface GetGame_getGame_restockRates_era3 {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface GetGame_getGame_restockRates {\n  era1: GetGame_getGame_restockRates_era1;\n  era2: GetGame_getGame_restockRates_era2;\n  era3: GetGame_getGame_restockRates_era3;\n}\n\nexport interface GetGame_getGame_state_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface GetGame_getGame_state_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface GetGame_getGame_state_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface GetGame_getGame_state_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: GetGame_getGame_state_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface GetGame_getGame_state_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface GetGame_getGame_state_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface GetGame_getGame_state_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface GetGame_getGame_state {\n  info: GetGame_getGame_state_info;\n  resourceMarket: GetGame_getGame_state_resourceMarket;\n  playerOrder: GetGame_getGame_state_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: GetGame_getGame_state_cityList[];\n  auction: GetGame_getGame_state_auction | null;\n  plantPhaseEvents: GetGame_getGame_state_plantPhaseEvents[];\n  isOver: boolean;\n}\n\nexport interface GetGame_getGame {\n  id: string;\n  map: GetGame_getGame_map;\n  regions: number[];\n  restockRates: GetGame_getGame_restockRates;\n  era2Start: number;\n  gameEnd: number;\n  cityCostHelper: string;\n  state: GetGame_getGame_state | null;\n}\n\nexport interface GetGame {\n  getGame: GetGame_getGame | null;\n}\n\nexport interface GetGameVariables {\n  id: string;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL subscription operation: GameStateUpdated\n// ====================================================\n\nexport interface GameStateUpdated_gameStateUpdated_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface GameStateUpdated_gameStateUpdated_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface GameStateUpdated_gameStateUpdated_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface GameStateUpdated_gameStateUpdated_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: GameStateUpdated_gameStateUpdated_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface GameStateUpdated_gameStateUpdated_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface GameStateUpdated_gameStateUpdated_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface GameStateUpdated_gameStateUpdated_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface GameStateUpdated_gameStateUpdated {\n  info: GameStateUpdated_gameStateUpdated_info;\n  resourceMarket: GameStateUpdated_gameStateUpdated_resourceMarket;\n  playerOrder: GameStateUpdated_gameStateUpdated_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: GameStateUpdated_gameStateUpdated_cityList[];\n  auction: GameStateUpdated_gameStateUpdated_auction | null;\n  plantPhaseEvents: GameStateUpdated_gameStateUpdated_plantPhaseEvents[];\n  isOver: boolean;\n}\n\nexport interface GameStateUpdated {\n  gameStateUpdated: GameStateUpdated_gameStateUpdated | null;\n}\n\nexport interface GameStateUpdatedVariables {\n  gameId: string;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL query operation: GetCurrentUser\n// ====================================================\n\nexport interface GetCurrentUser_getCurrentUser {\n  id: string;\n  username: string;\n  preferredColor: Color | null;\n  we: boolean;\n}\n\nexport interface GetCurrentUser {\n  getCurrentUser: GetCurrentUser_getCurrentUser | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL query operation: GetGameOverData\n// ====================================================\n\nexport interface GetGameOverData_getGameOverData_winOrder_spendData {\n  PLANT: number[];\n  RESOURCE: number[];\n  CITY: number[];\n  POWER: number[];\n}\n\nexport interface GetGameOverData_getGameOverData_winOrder {\n  username: string;\n  color: Color;\n  money: number;\n  won: boolean;\n  numPowered: number;\n  numCities: number;\n  spendData: GetGameOverData_getGameOverData_winOrder_spendData;\n}\n\nexport interface GetGameOverData_getGameOverData {\n  isOver: boolean;\n  winOrder: GetGameOverData_getGameOverData_winOrder[];\n}\n\nexport interface GetGameOverData {\n  getGameOverData: GetGameOverData_getGameOverData | null;\n}\n\nexport interface GetGameOverDataVariables {\n  id: string;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL query operation: GetMyRecentGames\n// ====================================================\n\nexport interface GetMyRecentGames_getMyRecentGames {\n  id: string;\n  name: string | null;\n  players: string[];\n}\n\nexport interface GetMyRecentGames {\n  getMyRecentGames: GetMyRecentGames_getMyRecentGames[] | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL query operation: GetOnlineUsernames\n// ====================================================\n\nexport interface GetOnlineUsernames {\n  getOnlineUsernames: string[];\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL query operation: GetRevenues\n// ====================================================\n\nexport interface GetRevenues {\n  getRevenues: number[];\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: KeepMeOnline\n// ====================================================\n\nexport interface KeepMeOnline_keepMeOnline {\n  id: string;\n}\n\nexport interface KeepMeOnline {\n  keepMeOnline: KeepMeOnline_keepMeOnline | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: Login\n// ====================================================\n\nexport interface Login_login {\n  token: string | null;\n}\n\nexport interface Login {\n  login: Login_login;\n}\n\nexport interface LoginVariables {\n  username: string;\n  password: string;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL query operation: FetchMap\n// ====================================================\n\nexport interface FetchMap_fetchMap_cities {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  region: number;\n}\n\nexport interface FetchMap_fetchMap_connections_cities {\n  id: string;\n}\n\nexport interface FetchMap_fetchMap_connections {\n  id: string;\n  cost: number;\n  cities: FetchMap_fetchMap_connections_cities[];\n}\n\nexport interface FetchMap_fetchMap {\n  id: string;\n  name: string;\n  cities: FetchMap_fetchMap_cities[];\n  connections: FetchMap_fetchMap_connections[];\n}\n\nexport interface FetchMap {\n  fetchMap: FetchMap_fetchMap;\n}\n\nexport interface FetchMapVariables {\n  mapName: string;\n  regions?: number[] | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL query operation: GetPlants\n// ====================================================\n\nexport interface GetPlants_fetchPlants {\n  id: string;\n  rank: number;\n  resourceType: PlantResourceType;\n  resourceBurn: number;\n  numCities: number;\n}\n\nexport interface GetPlants {\n  fetchPlants: GetPlants_fetchPlants[];\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: PowerUp\n// ====================================================\n\nexport interface PowerUp_powerUp_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface PowerUp_powerUp_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface PowerUp_powerUp_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface PowerUp_powerUp_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: PowerUp_powerUp_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface PowerUp_powerUp_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface PowerUp_powerUp_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface PowerUp_powerUp_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface PowerUp_powerUp {\n  info: PowerUp_powerUp_info;\n  resourceMarket: PowerUp_powerUp_resourceMarket;\n  playerOrder: PowerUp_powerUp_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: PowerUp_powerUp_cityList[];\n  auction: PowerUp_powerUp_auction | null;\n  plantPhaseEvents: PowerUp_powerUp_plantPhaseEvents[];\n  isOver: boolean;\n}\n\nexport interface PowerUp {\n  powerUp: PowerUp_powerUp;\n}\n\nexport interface PowerUpVariables {\n  gameId: string;\n  plantIds: string[];\n  hybridChoice?: HybridChoiceInput | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: PutUpPlant\n// ====================================================\n\nexport interface PutUpPlant_putUpPlant_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface PutUpPlant_putUpPlant_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface PutUpPlant_putUpPlant_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface PutUpPlant_putUpPlant_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: PutUpPlant_putUpPlant_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface PutUpPlant_putUpPlant_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface PutUpPlant_putUpPlant_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface PutUpPlant_putUpPlant_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface PutUpPlant_putUpPlant {\n  info: PutUpPlant_putUpPlant_info;\n  resourceMarket: PutUpPlant_putUpPlant_resourceMarket;\n  playerOrder: PutUpPlant_putUpPlant_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: PutUpPlant_putUpPlant_cityList[];\n  auction: PutUpPlant_putUpPlant_auction | null;\n  plantPhaseEvents: PutUpPlant_putUpPlant_plantPhaseEvents[];\n  isOver: boolean;\n}\n\nexport interface PutUpPlant {\n  putUpPlant: PutUpPlant_putUpPlant;\n}\n\nexport interface PutUpPlantVariables {\n  gameId: string;\n  plantId?: string | null;\n  bid?: number | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: SaveMap\n// ====================================================\n\nexport interface SaveMap_saveMap_cities {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  region: number;\n}\n\nexport interface SaveMap_saveMap_connections_cities {\n  id: string;\n}\n\nexport interface SaveMap_saveMap_connections {\n  id: string;\n  cost: number;\n  cities: SaveMap_saveMap_connections_cities[];\n}\n\nexport interface SaveMap_saveMap {\n  id: string;\n  name: string;\n  cities: SaveMap_saveMap_cities[];\n  connections: SaveMap_saveMap_connections[];\n}\n\nexport interface SaveMap {\n  saveMap: SaveMap_saveMap;\n}\n\nexport interface SaveMapVariables {\n  mapInput: MapInput;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL mutation operation: SetUserPreferences\n// ====================================================\n\nexport interface SetUserPreferences_setUserPreferences {\n  id: string;\n  preferredColor: Color | null;\n}\n\nexport interface SetUserPreferences {\n  setUserPreferences: SetUserPreferences_setUserPreferences;\n}\n\nexport interface SetUserPreferencesVariables {\n  preferredColor?: Color | null;\n  we?: boolean | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL fragment: Game\n// ====================================================\n\nexport interface Game_map_cities {\n  id: string;\n  name: string;\n  lat: number;\n  lng: number;\n  region: number;\n}\n\nexport interface Game_map_connections_cities {\n  id: string;\n}\n\nexport interface Game_map_connections {\n  id: string;\n  cost: number;\n  cities: Game_map_connections_cities[];\n}\n\nexport interface Game_map {\n  id: string;\n  name: string;\n  cities: Game_map_cities[];\n  connections: Game_map_connections[];\n}\n\nexport interface Game_restockRates_era1 {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface Game_restockRates_era2 {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface Game_restockRates_era3 {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface Game_restockRates {\n  era1: Game_restockRates_era1;\n  era2: Game_restockRates_era2;\n  era3: Game_restockRates_era3;\n}\n\nexport interface Game_state_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface Game_state_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface Game_state_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface Game_state_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: Game_state_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface Game_state_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface Game_state_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface Game_state_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface Game_state {\n  info: Game_state_info;\n  resourceMarket: Game_state_resourceMarket;\n  playerOrder: Game_state_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: Game_state_cityList[];\n  auction: Game_state_auction | null;\n  plantPhaseEvents: Game_state_plantPhaseEvents[];\n  isOver: boolean;\n}\n\nexport interface Game {\n  id: string;\n  map: Game_map;\n  regions: number[];\n  restockRates: Game_restockRates;\n  era2Start: number;\n  gameEnd: number;\n  cityCostHelper: string;\n  state: Game_state | null;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL fragment: GameState\n// ====================================================\n\nexport interface GameState_info {\n  turn: number;\n  era: number;\n  phase: Phase;\n  actionType: ActionType;\n  activeUser: string;\n}\n\nexport interface GameState_resourceMarket {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface GameState_playerOrder_resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\nexport interface GameState_playerOrder {\n  clockwiseOrder: number;\n  username: string;\n  color: Color;\n  money: number;\n  resources: GameState_playerOrder_resources;\n  plantIds: string[];\n}\n\nexport interface GameState_cityList {\n  cityId: string;\n  occupants: string[];\n}\n\nexport interface GameState_auction {\n  plantId: string;\n  bid: number;\n  leader: string;\n  active: string;\n  passed: string[] | null;\n}\n\nexport interface GameState_plantPhaseEvents {\n  plantId: string | null;\n  cost: number | null;\n  username: string;\n}\n\nexport interface GameState {\n  info: GameState_info;\n  resourceMarket: GameState_resourceMarket;\n  playerOrder: GameState_playerOrder[];\n  plantMarket: string[];\n  era3Plants: string[];\n  discardedPlants: string[];\n  possibleDeck: string[];\n  deckCount: number;\n  cityList: GameState_cityList[];\n  auction: GameState_auction | null;\n  plantPhaseEvents: GameState_plantPhaseEvents[];\n  isOver: boolean;\n}\n\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n// ====================================================\n// GraphQL fragment: Resources\n// ====================================================\n\nexport interface Resources {\n  coal: number;\n  oil: number;\n  trash: number;\n  uranium: number;\n}\n\n/* tslint:disable */\n// This file was automatically generated and should not be edited.\n\n//==============================================================\n// START Enums and Input Objects\n//==============================================================\n\nexport enum Phase {\n  CITY = \"CITY\",\n  PLANT = \"PLANT\",\n  POWER = \"POWER\",\n  RESOURCE = \"RESOURCE\",\n}\n\nexport enum ActionType {\n  BID_ON_PLANT = \"BID_ON_PLANT\",\n  BUY_CITIES = \"BUY_CITIES\",\n  BUY_RESOURCES = \"BUY_RESOURCES\",\n  DISCARD_PLANT = \"DISCARD_PLANT\",\n  POWER_UP = \"POWER_UP\",\n  PUT_UP_PLANT = \"PUT_UP_PLANT\",\n}\n\nexport enum Color {\n  BLACK = \"BLACK\",\n  BLUE = \"BLUE\",\n  GREEN = \"GREEN\",\n  PURPLE = \"PURPLE\",\n  RED = \"RED\",\n  YELLOW = \"YELLOW\",\n}\n\nexport enum PlantResourceType {\n  COAL = \"COAL\",\n  HYBRID = \"HYBRID\",\n  OIL = \"OIL\",\n  TRASH = \"TRASH\",\n  URANIUM = \"URANIUM\",\n  WIND = \"WIND\",\n}\n\n// \nexport interface ResourcesInput {\n  coal?: number | null;\n  oil?: number | null;\n  trash?: number | null;\n  uranium?: number | null;\n}\n\n// \nexport interface HybridChoiceInput {\n  coal: number;\n  oil: number;\n}\n\n// \nexport interface MapInput {\n  id: string;\n  name: string;\n  cities: CityInput[];\n}\n\n// \nexport interface CityInput {\n  id: string;\n  lat: number;\n  lng: number;\n}\n\n//==============================================================\n// END Enums and Input Objects\n//==============================================================","import { useParams } from \"react-router-dom\";\nimport { useQuery } from \"@apollo/client\";\nimport { GetGame, GetGameVariables } from \"../generatedTypes\";\nimport { GAME_QUERY } from \"../graphql/gameQuery\";\n\nexport const useGameQuery = (gameId: string) => {\n  return useQuery<GetGame, GetGameVariables>(GAME_QUERY, {\n    variables: { id: gameId }\n  });\n}\n\nexport const useGame = () => {\n  const { gameId } = useParams<{ gameId: string }>();\n  const { loading, error, data } = useGameQuery(gameId);\n\n  if (loading || error || !data || !data.getGame) {\n    return null;\n  }\n\n  return data.getGame;\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\ninterface CityIconProps {\n  color: string;\n  height?: number;\n  empty?: boolean;\n  number?: number;\n  strokeWidth?: number;\n}\n\nexport const CityIcon: React.FC<CityIconProps> = ({ color, height = 16, empty, number, strokeWidth }) => {\n  return (\n    <Container height={height}>\n      <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 10 10\">\n        <path\n          d={`\n            M 1 9\n            L 1 5\n            L 5 1\n            L 9 5\n            L 9 9\n            Z\n          `}\n          stroke={color}\n          strokeWidth={strokeWidth || 1}\n          fill={empty ? \"none\" : color}\n        />\n        {(number || number === 0) && (\n          <text\n            x={5}\n            y={6.5}\n            textAnchor=\"middle\"\n            alignmentBaseline=\"middle\"\n            dominantBaseline=\"middle\"\n            style={{ fontSize: 5 }}\n          >{number}</text>\n        )}\n      </svg>\n    </Container>\n  );\n}\n\nconst Container = styled.div<{ height: number }>`\n  height: ${({ height }) => height}px;\n  width: ${({ height }) => height}px;\n`;\n\nexport const Arrow: React.FC<{ height?: number }> = ({ height = 24 }) => {\n  return (\n    <Container height={height}>\n      <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 10 10\">\n        <line \n          x1={1}\n          y1={5}\n          x2={9.3}\n          y2={5}\n          stroke=\"black\"\n          strokeWidth={1}\n        />\n        <line \n          x1={7}\n          y1={3}\n          x2={9}\n          y2={5}\n          stroke=\"black\"\n          strokeWidth={1}\n        />\n        <line \n          x1={7}\n          y1={7}\n          x2={9}\n          y2={5}\n          stroke=\"black\"\n          strokeWidth={1}\n        />\n      </svg>\n    </Container>\n  );\n}\n","import { Color, PlantResourceType } from \"./generatedTypes\";\nimport C from \"color\";\n\nexport type ResourceType = \"coal\" | \"oil\" | \"trash\" | \"uranium\";\n\nexport const resourceColors: Record<PlantResourceType, string> = {\n  COAL: '#7a623e',\n  OIL: '#646675',\n  TRASH: '#a3a359',\n  URANIUM: '#a25858',\n  WIND: '#75b786',\n  HYBRID: 'rgba(0, 0, 0, 0.5)'\n};\n\nexport const resourceColorFilters: Record<PlantResourceType, string> = {\n  COAL: \"invert(40%) sepia(5%) saturate(4708%) hue-rotate(357deg) brightness(86%) contrast(71%)\",\n  OIL: \"invert(40%) sepia(11%) saturate(480%) hue-rotate(195deg) brightness(96%) contrast(94%)\",\n  TRASH: \"invert(78%) sepia(7%) saturate(2348%) hue-rotate(22deg) brightness(82%) contrast(83%)\",\n  URANIUM: \"invert(42%) sepia(5%) saturate(3791%) hue-rotate(313deg) brightness(98%) contrast(98%)\",\n  WIND: \"\",\n  HYBRID: \"\"\n};\n\nexport const getSecondaryResourceColor = (resourceType: PlantResourceType): string => {\n  const primaryColor = resourceColors[resourceType];\n\n  return C(primaryColor).lighten(0.5).hex();\n}\n\nexport const playerColors: Record<Color, string> = {\n  RED: \"#D25C5C\",\n  YELLOW: \"#D2BE5C\",\n  GREEN: \"#5CD273\",\n  BLUE: \"#5C9BD2\",\n  PURPLE: \"#9B5CD2\",\n  BLACK: \"#4A4A4A\"\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { renderToString } from \"react-dom/server\";\nimport { FetchMap_fetchMap_cities, Color } from \"../../generatedTypes\";\nimport { Marker } from \"react-leaflet\";\nimport { divIcon } from \"leaflet\";\nimport { CityIcon } from \"./CityIcon\";\nimport { playerColors } from \"../../constants\";\nimport { useDebouncedCallback } from 'use-debounce';\n\ninterface CityMarkerProps {\n  city: FetchMap_fetchMap_cities;\n  colors?: Color[];\n  era?: number;\n  isSelected?: boolean;\n  selectedColor?: Color;\n  onClick?: () => void;\n  hasNuclearPower: boolean;\n  isDraggable?: boolean;\n  onDragEnd?: (pos: { lat: number; lng: number }) => void;\n}\n\nconst noop = () => {};\n\nexport const CityMarker: React.FC<CityMarkerProps> = ({\n  city,\n  colors = [],\n  era = 3,\n  isSelected = false,\n  selectedColor = Color.BLUE,\n  onClick = noop,\n  hasNuclearPower,\n  isDraggable = false,\n  onDragEnd,\n}) => {\n  const iconHtml = renderToString(<City\n    city={city}\n    era={era}\n    colors={colors}\n    isSelected={isSelected}\n    selectedColor={selectedColor}\n    hasNuclearPower={hasNuclearPower}\n  />);\n\n  const debouncedOnClick = useDebouncedCallback(onClick, 20)\n  \n  return (\n    <Marker\n      position={[city.lat, city.lng]}\n      onClick={debouncedOnClick}\n      icon={divIcon({iconSize: [60, 30], className: `city-icon-${city.id}`, html: iconHtml })}\n      draggable={isDraggable}\n      onDragEnd={(e: any) => onDragEnd && onDragEnd(e.target._latlng)}\n    />\n  );\n}\n\ninterface CityProps {\n  city: FetchMap_fetchMap_cities;\n  era: number;\n  colors: Color[];\n  isSelected: boolean;\n  selectedColor: Color;\n  hasNuclearPower: boolean;\n}\n\nconst ex = (\n  <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 10 10\">\n    <line x1={3.5} y1={3.5} x2={6.5} y2={6.5} stroke=\"#888\" strokeWidth={0.75} />\n    <line x1={3.5} y1={6.5} x2={6.5} y2={3.5} stroke=\"#888\" strokeWidth={0.75} />\n  </svg>\n);\n\nconst City: React.FC<CityProps> = ({ city, era, colors, isSelected, selectedColor, hasNuclearPower }) => {  \n  return (\n    <Container redden={hasNuclearPower}>\n      <div className=\"name\">{city.name}</div>\n      <div className=\"players\">\n        {Array(3).fill(true).map((_, idx) => (\n          <div key={idx}>\n            {colors[idx] && <CityIcon color={playerColors[colors[idx]]} height={16} />}\n            {idx >= era && ex}\n            {idx === colors.length && isSelected && <CityIcon color={selectedColor} empty height={16} />}\n          </div>\n        ))}\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div<{ redden: boolean; }>`\n  border: 1px solid black;\n  height: 32px;\n  width: 60px;\n  border-radius: 2px;\n  background-color: ${({ redden }) => redden ? '#642D2D' : '#333'};\n\n  .name {\n    width: 100%;\n    height: 25%;\n    text-align: center;\n    font-size: 9px;\n    color: #ccc;\n  }\n\n  .players {\n    width: 100%;\n    height: 75%;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    margin-top: 1px;\n\n    > div {\n      display: flex;\n      justify-content: center;\n      align-items: center\n      width: 16px;\n      height: 16px;\n      background-color: #ddd;\n      border-radius: 2px;\n    }\n  }\n`;","import gql from \"graphql-tag\";\n\nexport const GET_CURRENT_USER_QUERY = gql`\n  query GetCurrentUser {\n    getCurrentUser {\n      id\n      username\n      preferredColor\n      we\n    }\n  }\n`;\n ","import { useGame } from \"./useGame\";\nimport { GetCurrentUser, GameState_playerOrder } from \"../generatedTypes\";\nimport { useQuery } from \"@apollo/client\";\nimport { GET_CURRENT_USER_QUERY } from \"../graphql/getCurrentUser\";\n\nexport const useMe = (): GameState_playerOrder => {\n  const { loading, error, data } = useQuery<GetCurrentUser>(GET_CURRENT_USER_QUERY);\n  const game = useGame();\n  \n  if (!game || loading || error || !data || !data.getCurrentUser) {\n    return null;\n  }\n\n  const { username } = data.getCurrentUser;\n  return game.state.playerOrder.find((player) => player.username === username) || null;\n};\n","interface MapConfig {\n  center: [number, number];\n  minZoom: number;\n  maxZoom: number;\n  maxBounds?: [[number, number], [number, number]];\n}\n\nconst configs: Record<string, MapConfig> = {\n  USA: {\n    center: [33.5, -95],\n    minZoom: 4.5,\n    maxZoom: 6.5,\n    maxBounds: [[57, -145], [11, -59]]\n  },\n  Germany: {\n    center: [51, 10.5],\n    minZoom: 6,\n    maxZoom: 8.5,\n  },\n  Italy: {\n    center: [42, 12.5],\n    minZoom: 6,\n    maxZoom: 9,\n  },\n  Seattle: {\n    center: [47.6062, -122.3321],\n    minZoom: 12,\n    maxZoom: 14,\n  },\n  ['Northern Europe']: {\n    center: [61.4, 20],\n    minZoom: 5,\n    maxZoom: 10,\n  },\n  China: {\n    center: [35.9, 104.2],\n    minZoom: 4.5,\n    maxZoom: 6.5,\n  },\n  France: {\n    center: [46.2, 2.2],\n    minZoom: 6,\n    maxZoom: 8.5,\n  }\n};\n\nexport const getMapConfig = (mapName: string): MapConfig => {\n  return configs[mapName] || configs.USA;\n}\n","import { useState, useEffect } from \"react\";\nimport { ResourceType } from \"../constants\";\nimport { useGame } from \"./useGame\";\n\nconst emptyCart: Record<ResourceType, number> = {\n  coal: 0,\n  oil: 0,\n  trash: 0,\n  uranium: 0\n};\n\nexport interface ResourceCart {\n  resources: Record<ResourceType, number>;\n  setResource: (resourceType: ResourceType) => (inCart: number) => void;\n}\n\nexport const useResourceCart = (): ResourceCart => {\n  const { state } = useGame();\n  const [resources, setCart] = useState<Record<ResourceType, number>>({ ...emptyCart });\n\n  useEffect(() => {\n    if (state.info.activeUser) {\n      setCart({ ...emptyCart });\n    }\n  }, [state.info.activeUser]);\n\n  const setResource = (resourceType: ResourceType) => (inCart: number) => {\n    setCart({\n      ...resources,\n      [resourceType]: inCart\n    })\n  };\n\n  return {\n    resources,\n    setResource\n  };\n}\n","import { useState, useEffect } from \"react\";\nimport { useGame } from \"./useGame\";\nimport { useMe } from \"./useMe\";\nimport { Phase } from \"../generatedTypes\";\nimport { calculateCityCost } from \"../logic/cities\";\n\nexport interface CityCart {\n  cityIds: string[];\n  addToCart: (id: string) => void;\n  removeFromCart: (id: string) => void;\n  clearCart: () => void;\n  toggleInCart: (id: string) => void;\n  cost: number;\n}\n\n// only call this once, pass stuff down as props\n// TODO: do this through apollo client\nexport const useCityCart = (): CityCart => {\n  const { state, cityCostHelper } = useGame();\n  const me = useMe();  \n  const [cityIds, setCityCart] = useState<string[]>([]);\n\n  const addToCart = (id: string): void => {\n    if (!me || state.info.phase === Phase.POWER) {\n      return;\n    }\n\n    const myTurnOrder = state.playerOrder.findIndex((p) => p.username === me.username);\n    const activeTurnOrder = state.playerOrder.findIndex((p) => p.username === state.info.activeUser);\n\n    if (state.info.phase === Phase.CITY && myTurnOrder > activeTurnOrder) {\n      return;\n    }\n\n    const { occupants = [] } = state.cityList.find((ci) => ci.cityId === id) || {};\n\n    if (occupants.length >= state.info.era) {\n      return;\n    }\n\n    if (occupants.some((p) => p === me.username)) {\n      return;\n    }\n    \n    setCityCart([...cityIds, id]);\n  }\n\n  const removeFromCart = (id: string): void => setCityCart(cityIds.filter((cartId) => cartId !== id));\n\n  const toggleInCart = (id: string): void => {\n    if (cityIds.includes(id)) {\n      removeFromCart(id);\n    } else {\n      addToCart(id);\n    }\n  }\n\n  const clearCart = (): void => setCityCart([]);\n\n  const cost = calculateCityCost(state, me, cityIds, JSON.parse(cityCostHelper));\n\n  useEffect(() => {\n    // if cities get bought by someone else, we might need to remove it from the cart\n    if (state.info.phase === Phase.CITY) {\n      const citiesToRemove = cityIds.reduce<Record<string, boolean>>((acc, id) => {\n        const cityInstance = state.cityList.find((ci) => ci.cityId === id);\n        if (cityInstance && cityInstance.occupants.length >= state.info.era) {\n          acc[id] = true;\n        }\n        return acc;\n      }, {});\n\n      setCityCart(cityIds.filter(id => !citiesToRemove[id]));\n    }\n  }, [state]);\n\n  return {\n    cityIds,\n    addToCart,\n    removeFromCart,\n    toggleInCart,\n    clearCart,\n    cost\n  };\n}\n","import { GameState, GameState_playerOrder } from \"../generatedTypes\";\n\nexport const calculateCityCost = (\n  state: GameState,\n  me: GameState_playerOrder,\n  cart: string[],\n  costHelper: Record<number, Record<number, number>>\n): number => {\n  if (!costHelper || !me) {\n    return null;\n  }\n  \n  let remainingPurchaseIds = cart.slice();\n\n  const network: string[] = state.cityList\n    .filter((cityInstance) =>\n      cityInstance.occupants.some(p => p === me.username)\n    ).map((cityInstance) => cityInstance.cityId);\n\n  let connectionCost = 0;\n  while (remainingPurchaseIds.length > 0) {\n    if (network.length === 0) {\n      network.push(remainingPurchaseIds[0]);\n      remainingPurchaseIds = remainingPurchaseIds.slice(1);\n      continue;\n    }\n\n    let minPurchaseCost = Infinity;\n    let cheapestPurchaseId: string = null;\n    remainingPurchaseIds.forEach((purchaseId) => {\n      const costsToNetwork = network.map((ownedId) => costHelper[+ownedId][+purchaseId]);\n      const cheapestPath = Math.min(...costsToNetwork);\n\n      if (cheapestPath < minPurchaseCost) {\n        minPurchaseCost = cheapestPath;\n        cheapestPurchaseId = purchaseId;\n      }\n    });\n\n    connectionCost += minPurchaseCost;\n    network.push(cheapestPurchaseId);\n    remainingPurchaseIds = remainingPurchaseIds.filter(id => id !== cheapestPurchaseId);\n  }\n\n  const occupancyCost = cart.reduce((acc, purchaseId) => {\n    const { occupants = [] } = state.cityList\n      .find(cityInstance => cityInstance.cityId === purchaseId) || {};\n\n    return acc + 10 + 5 * occupants.length;\n  }, 0);\n\n  return connectionCost + occupancyCost;\n}\n","import { useState, useEffect } from \"react\";\nimport { GetPlants_fetchPlants } from \"../generatedTypes\";\nimport { useGame } from \"./useGame\";\n\nexport interface PowerCart {\n  plants: GetPlants_fetchPlants[];\n  togglePlant: (plant: GetPlants_fetchPlants) => void;\n}\n\nexport const usePowerCart = (): PowerCart => {\n  const { state } = useGame();\n  const [plants, setPlants] = useState<GetPlants_fetchPlants[]>([]);\n\n  useEffect(() => {\n    setPlants([]);\n  }, [state.info.actionType]);\n\n  const addPlant = (plant: GetPlants_fetchPlants) => setPlants([...plants, plant]);\n  const removePlant = (plant: GetPlants_fetchPlants) => setPlants(plants.filter(p => p.id !== plant.id));\n\n  const togglePlant = (plant: GetPlants_fetchPlants) => {\n    if (plants.some(p => p.id === plant.id)) {\n      removePlant(plant);\n    } else {\n      addPlant(plant);\n    }\n  }\n\n  return {\n    plants,\n    togglePlant\n  };\n}\n","import React from \"react\";\nimport { PlantCart, usePlantCart } from \"../hooks/usePlantCart\";\nimport { ResourceCart, useResourceCart } from \"../hooks/useResourceCart\";\nimport { CityCart, useCityCart } from \"../hooks/useCityCart\";\nimport { PowerCart, usePowerCart } from \"../hooks/usePowerCart\";\nimport { DiscardCart, useDiscardCart } from \"../hooks/useDiscardCart\";\n\ninterface Carts {\n  plantCart: PlantCart;\n  resourceCart: ResourceCart;\n  cityCart: CityCart;\n  powerCart: PowerCart;\n  discardCart: DiscardCart;\n}\n\nexport const CartsContext = React.createContext<Carts>({\n  plantCart: null,\n  resourceCart: null,\n  cityCart: null,\n  powerCart: null,\n  discardCart: null\n});\n\nexport const CartsContextProvider: React.FC = ({ children }) => {\n  const plantCart = usePlantCart();\n  const resourceCart = useResourceCart();\n  const cityCart = useCityCart();\n  const powerCart = usePowerCart();\n  const discardCart = useDiscardCart();\n\n  const carts: Carts = {\n    plantCart,\n    resourceCart,\n    cityCart,\n    powerCart,\n    discardCart\n  };\n\n  return (\n    <CartsContext.Provider value={carts}>{children}</CartsContext.Provider>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport { GetPlants_fetchPlants } from \"../generatedTypes\";\nimport { useGame } from \"./useGame\";\n\nexport interface PlantCart {\n  selectedPlant: GetPlants_fetchPlants;\n  setSelectedPlant: (plantInstance: GetPlants_fetchPlants) => void;\n}\n\nexport const usePlantCart = (): PlantCart => {\n  const { state } = useGame();\n  const [selectedPlant, setSelectedPlant] = useState<GetPlants_fetchPlants>(null);\n\n  useEffect(() => {\n    setSelectedPlant(null);\n  }, [state.info.actionType]);\n\n  return {\n    selectedPlant,\n    setSelectedPlant\n  };\n}\n","import { useState, useEffect } from \"react\";\nimport { useGame } from \"./useGame\";\nimport { GetPlants_fetchPlants } from \"../generatedTypes\";\n\nexport interface DiscardCart {\n  selectedPlant: GetPlants_fetchPlants;\n  togglePlant: (plant: GetPlants_fetchPlants) => void;\n}\n\nexport const useDiscardCart = (): DiscardCart => {\n  const { state } = useGame();\n  const [selectedPlant, setSelectedPlant] = useState<GetPlants_fetchPlants>(null);\n\n  useEffect(() => {\n    setSelectedPlant(null);\n  }, [state.info.actionType]);\n\n  const togglePlant = (plant: GetPlants_fetchPlants) => {\n    if (selectedPlant && plant.id === selectedPlant.id) {\n      setSelectedPlant(null);\n    } else {\n      setSelectedPlant(plant);\n    }\n  }\n\n  return {\n    selectedPlant,\n    togglePlant\n  };\n}\n","const mapboxKey = 'pk.eyJ1IjoibWJpbmdiZXIiLCJhIjoiY2l6eGcxMmw2MDJreTMycXJqeTVuejNvaSJ9.bA_ZZVqysUAZs7wyw0ckRw'\nexport const tileUrl = `https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.png?access_token=${mapboxKey}`;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Map as ReactLeaflet, TileLayer } from \"react-leaflet\";\n\nimport \"leaflet/dist/leaflet.css\";\nimport { FetchMap_fetchMap_cities, Color } from \"../../generatedTypes\";\nimport { Connections } from \"./Connections\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { CityMarker } from \"./CityMarker\";\nimport { useMe } from \"../../hooks/useMe\";\nimport { getMapConfig } from \"./mapConfig\";\nimport { CartsContext } from \"../CartsContext\";\nimport { tileUrl } from \"./tileUrl\";\n\ninterface MapProps {}\n\nexport const GameMap: React.FC<MapProps> = () => {\n  const { state: { cityList, playerOrder, info }, map } = useGame();\n  const me = useMe();\n  const { cityCart } = React.useContext(CartsContext);\n  \n  const cityLookup = React.useMemo(() => {\n    return map.cities.reduce<Record<string, FetchMap_fetchMap_cities>>((acc, city) => {\n      acc[city.id] = city;\n      return acc;\n    }, {});\n  }, [map.cities]);\n\n  const colorsLookup = React.useMemo(() => {\n    return map.cities.reduce<Record<string, Color[]>>((acc, city) => {\n      const cityInstance = cityList.find(c => c.cityId === city.id);\n      const occupants = cityInstance ? cityInstance.occupants : [];\n      const colors = occupants.map(name => playerOrder.find(p => p.username === name).color);\n      acc[city.id] = colors;\n      return acc;\n    }, {});\n  }, [map, cityList, playerOrder]);\n\n  const { center, minZoom, maxZoom, maxBounds } = getMapConfig(map.name);\n  \n  return (\n    <Container>\n      <ReactLeaflet\n        center={center}\n        zoom={minZoom}\n        minZoom={minZoom}\n        maxZoom={maxZoom}\n        maxBounds={maxBounds}\n        attributionControl={false}\n        zoomControl={false}\n        zoomSnap={0.25}\n        zoomDelta={0.25}\n      >\n        <TileLayer url={tileUrl} />\n        {map.cities.map((city) => {\n\n          const onClick = () => {\n            cityCart.toggleInCart(city.id);\n          }\n          \n          return (\n            <CityMarker\n              onClick={onClick}\n              key={city.id}\n              city={city}\n              colors={colorsLookup[city.id]}\n              era={info.era}\n              isSelected={cityCart.cityIds.includes(city.id)}\n              selectedColor={me && me.color}\n              hasNuclearPower={map.name === 'Northern Europe' && city.region > 2}\n            />\n          )\n        })}\n        <Connections cityLookup={cityLookup} connections={map.connections} />\n      </ReactLeaflet>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100%;\n\n  > div {\n    height: 100%;\n  }\n\n  .leaflet-div-icon {\n    background: none !important;\n    border: none !important;\n  }\n`;","import React from 'react';\nimport styled from \"styled-components\";\nimport { PlantResourceType } from '../../generatedTypes';\nimport { resourceColorFilters } from '../../constants';\n\ninterface ResourceIconProps {\n  type: PlantResourceType;\n  withColor?: boolean;\n}\n\nexport const ResourceIcon: React.FC<ResourceIconProps> = ({ type, withColor }) => {\n  if (type === PlantResourceType.HYBRID) {\n    return (\n      <HybridContainer>\n        <Image \n          type={PlantResourceType.COAL}\n          withColor={withColor}\n          src={require(\"../../assets/resources/coal.png\")}\n        />\n        <div className=\"slash\">/</div>\n        <Image \n          type={PlantResourceType.OIL}\n          withColor={withColor}\n          src={require(\"../../assets/resources/oil.png\")}\n        />\n      </HybridContainer>\n    );\n  }\n  \n  return (\n    <Image\n      type={type}\n      withColor={withColor}\n      src={require(`../../assets/resources/${type.toLowerCase()}.png`)}\n    />\n  );\n}\n\nconst Image = styled.img<ResourceIconProps>`\n  max-height: 90%;\n\n  ${({ withColor, type }) => withColor ? `filter: ${resourceColorFilters[type as PlantResourceType]};` : \"\"}\n`;\n\nconst HybridContainer = styled.div`\n  display: flex;\n  align-items: center;\n  height: 60%;\n  font-size: 60%;\n\n  .slash {\n    font-size: 120%;\n    font-weight: bold;\n  }\n`;","import { GameState_playerOrder, PlantResourceType, GetPlants_fetchPlants } from \"../generatedTypes\";\nimport { ResourceType } from \"../constants\";\n\ntype Resources = Record<ResourceType, number>;\n\nexport const getSingleResourceCost = (\n  quantity: number,\n  resourceType: ResourceType\n): number => {\n    if (resourceType === \"uranium\") {\n    return quantity < 5 ? 18 - 2 * quantity : 13 - quantity;\n  }\n\n  return 8 - Math.floor((quantity - 1) / 3);\n};\n\nexport const getTotalResourceCost = (market: Resources, purchase: Resources) => {\n  const marketCopy = { ...market };\n  const purchaseCopy = { ...purchase };\n\n  return Object.keys(purchaseCopy)\n    .reduce<number>((cost, rt) => {\n      const resourceType = rt as ResourceType;\n      \n      while (purchaseCopy[resourceType] > 0) {\n        cost += getSingleResourceCost(marketCopy[resourceType], resourceType);\n        purchaseCopy[resourceType]--;\n        marketCopy[resourceType]--;\n      }\n      \n      return cost;\n    }, 0)\n};\n\nexport const hasPlantForResource = (\n  resourceType: ResourceType,\n  player: GameState_playerOrder,\n  getPlant: (plantId: string) => GetPlants_fetchPlants,\n): boolean => {\n  return player.plantIds.some((plantId) => {\n    const plant = getPlant(plantId);\n    const isHybridPlant = plant.resourceType === PlantResourceType.HYBRID;\n    const isCoalOrOil = [\"coal\", \"oil\"].includes(resourceType);\n    const typeMatches = plant.resourceType === resourceType.toUpperCase() as PlantResourceType;\n\n    return (isHybridPlant && isCoalOrOil) || typeMatches;\n  });\n}\n\nexport const getResourceCapacity = (\n  plants: GetPlants_fetchPlants[] = []\n): Record<PlantResourceType, number> => {\n  return plants\n    .reduce<Record<PlantResourceType, number>>((acc, plant) => {\n      const { resourceType, resourceBurn } = plant;\n      acc[resourceType] = acc[resourceType] || 0;\n      acc[resourceType] += resourceBurn * 2;\n      return acc;\n    }, { COAL: 0, OIL: 0, TRASH: 0, URANIUM: 0, WIND: 0, HYBRID: 0 });\n}\n\nconst canFitResources = (\n  player: GameState_playerOrder,\n  purchase: Resources,\n  market: Resources,\n  getPlant: (plantId: string) => GetPlants_fetchPlants,\n): boolean => {\n  if (!player) {\n    return false;\n  }\n  \n  const totalCost = getTotalResourceCost(market, purchase);\n\n  if (totalCost > player.money) {\n    return false;\n  }\n\n  const notEnoughResources = Object.keys(purchase).some((resourceType) => (\n    purchase[resourceType as ResourceType] > market[resourceType as ResourceType]\n  ));\n  if (notEnoughResources) {\n    return false;\n  }\n  \n  const resourceCapacity = getResourceCapacity(player.plantIds.map(getPlant));\n  \n  const resourcesAfterPurchase: Resources = {\n    coal: player.resources.coal + (purchase.coal || 0),\n    oil: player.resources.oil + (purchase.oil || 0),\n    trash: player.resources.trash + (purchase.trash || 0),\n    uranium: player.resources.uranium + (purchase.uranium || 0),\n  };\n\n  for (const r in resourcesAfterPurchase) {\n    if (r === \"trash\") {\n      if (resourcesAfterPurchase.trash > resourceCapacity[PlantResourceType.TRASH]) {\n        return false;\n      }\n    }\n\n    if (r === \"uranium\") {\n      if (resourcesAfterPurchase.uranium > resourceCapacity[PlantResourceType.URANIUM]) {\n        return false;\n      }\n    }\n\n    if (r === \"coal\" || r === \"oil\") {\n      for (let i = 0; i < resourcesAfterPurchase[r]; i++) {\n        const resourceType = r === \"coal\" ? PlantResourceType.COAL : PlantResourceType.OIL\n        if (resourceCapacity[resourceType] > 0) {\n          resourceCapacity[resourceType]--;\n        } else if (resourceCapacity[PlantResourceType.HYBRID] > 0) {\n          resourceCapacity[PlantResourceType.HYBRID]--;\n        } else {\n          return false;\n        }\n      }\n    }\n  }\n\n  return true;\n}\n\nexport const canFitOneMoreResource = (\n  resourceType: ResourceType,\n  player: GameState_playerOrder,\n  cart: Resources,\n  market: Resources,\n  getPlant: (plantId: string) => GetPlants_fetchPlants,\n): boolean => {\n  const updatedCart = {\n    ...cart,\n    [resourceType]: cart[resourceType] + 1\n  };\n\n  return canFitResources(player, updatedCart, market, getPlant);\n}\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\n\ninterface IncrementerProps {\n  value: number;\n  setValue: (value: number) => void;\n  disablePlus: boolean;\n}\n\nexport const Incrementer: React.FC<IncrementerProps> = ({ value, setValue, disablePlus }) => {\n  return (\n    <Container>\n      <MinusButton disabled={value === 0} onClick={() => setValue(value - 1)}>-</MinusButton>\n      <Value>{value}</Value>\n      <PlusButton disabled={disablePlus} onClick={() => setValue(value + 1)}>+</PlusButton>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nconst buttonStyles = css`\n  height: 16px;\n  width: 18px;\n  border-radius: 4px;\n  padding: 0;\n  padding-bottom: 1px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #999;\n  background-color: #999;\n  cursor: pointer;\n  outline: none;\n  line-height: 12px;\n\n  :disabled {\n    background-color: #ddd;\n  }\n`;\n\nconst MinusButton = styled.button`\n  ${buttonStyles}\n\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n`;\n\nconst PlusButton = styled.button`\n  ${buttonStyles}\n\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n`;\n\nconst Value = styled.div`\n  border-top: 1px solid #999;\n  border-bottom: 1px solid #999;\n  height: 16px;\n  width: 16px;\n  text-align: center;\n  font-size: 14px;\n  line-height: 14px;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ResourceType, resourceColors, getSecondaryResourceColor } from \"../../constants\";\nimport { ResourceIcon } from \"./ResourceIcon\";\nimport { getSingleResourceCost } from \"../../logic/resources\";\nimport { PlantResourceType } from \"../../generatedTypes\";\nimport { Incrementer } from \"./Incrementer\";\n\ninterface ResourceDialProps {\n  resourceType: ResourceType;\n  era: number;\n  inStock: number;\n  inCart: number;\n  setInCart: (inCart: number) => void;\n  restockRates: number[];\n  showIncrementor: boolean;\n  disablePlus: boolean;\n}\n\nexport const ResourceDial: React.FC<ResourceDialProps> = ({\n  resourceType,\n  era,\n  inStock,\n  restockRates,\n  inCart,\n  setInCart,\n  showIncrementor,\n  disablePlus\n}) => {\n  const numDivisions = resourceType === \"uranium\" ? 12 : 8;\n  const maxStock = resourceType === \"uranium\" ? 12 : 24;\n  const ratio = inStock / maxStock;\n  const ratioAdjusted = (inStock - inCart) / maxStock;\n\n  const innerR = 0.75;\n  const outerR = 1;\n  const startAngle = -Math.PI / 4;\n  const endAngle = 5 * Math.PI / 4;\n  const ratioAngle = startAngle + ratio * (endAngle - startAngle);\n  const ratioAdjustedAngle = startAngle + ratioAdjusted * (endAngle - startAngle);\n\n  const drawArc = (angle: number, color: string) => {\n    const innerStartX = innerR * Math.cos(startAngle);\n    const innerStartY = innerR * Math.sin(startAngle);\n    \n    const outerStartX = outerR * Math.cos(startAngle);\n    const outerStartY = outerR * Math.sin(startAngle);\n\n    const outerEndX = outerR * Math.cos(angle);\n    const outerEndY = outerR * Math.sin(angle);\n\n    const innerEndX = innerR * Math.cos(angle);\n    const innerEndY = innerR * Math.sin(angle);\n\n    const largeAngleSweep = +(angle - startAngle > Math.PI);\n    \n    return (\n      <path \n        fill={color}\n        d={`\n          M ${innerStartX} ${innerStartY}\n          L ${outerStartX} ${outerStartY}\n          A ${outerR} ${outerR} 0 ${largeAngleSweep} 1 ${outerEndX} ${outerEndY}\n          L ${innerEndX} ${innerEndY}\n          A ${innerR} ${innerR} 0 ${largeAngleSweep} 0 ${innerStartX} ${innerStartY}\n        `}\n      />\n    );\n  };\n\n  const drawLine = (key: string, angle: number, isMinor: boolean = false) => {\n    const x1 = innerR * Math.cos(angle);\n    const y1 = innerR * Math.sin(angle);\n    const outerRForLine = isMinor ? innerR + 0.7 * (outerR - innerR) : outerR;\n    const x2 = outerRForLine * Math.cos(angle);\n    const y2 = outerRForLine * Math.sin(angle);\n\n    return (\n      <path\n        key={key}\n        d={`M${x1} ${y1} L ${x2} ${y2}`}\n        stroke=\"black\"\n        strokeWidth={isMinor ? 0.01 : 0.05}\n      />\n    );\n  }\n\n  const amountForCost = inStock - inCart;\n  \n  return (\n    <Container>\n      <IconAndPrice>\n        <ResourceIcon type={resourceType.toUpperCase() as PlantResourceType} />\n        <Dot />\n        <Price>\n          {amountForCost > 0 ? (\n            <><span className=\"dollar\">$</span>{getSingleResourceCost(amountForCost, resourceType)}</>\n          ) : (\n            <>--</>\n          )}\n        </Price>\n      </IconAndPrice>\n      <RestockRates>\n        {restockRates.reduce((acc, rate, idx) => {\n          acc.push(<span key={idx} className={idx + 1 === era ? \"era-on\" : \"era-off\"}>+{rate}</span>);\n          if (idx < 2) {\n            acc.push(<span key={`${idx}s`}>{` / `}</span>);\n          }\n\n          return acc;\n        }, [])}\n      </RestockRates>\n      <ActionPanel>\n        {showIncrementor && (\n          <Incrementer value={inCart} setValue={setInCart} disablePlus={disablePlus} />\n        )}\n      </ActionPanel>\n      <SvgContainer>\n        <svg width=\"100%\" height=\"100%\" viewBox=\"-1 -1 2 2\">\n          {drawArc(endAngle, \"#bbb\")}\n          {drawArc(ratioAngle, getSecondaryResourceColor(resourceType.toUpperCase() as PlantResourceType))}\n          {drawArc(ratioAdjustedAngle, resourceColors[resourceType.toUpperCase() as PlantResourceType])}\n          {Array(numDivisions).fill(true).reduce((acc, _, i) => {\n            const groupAngle = (endAngle - startAngle) / numDivisions;\n            const angle = startAngle + groupAngle * i;\n\n            if (i > 0) {\n              acc.push(drawLine(`${i}_0`, angle));\n            }\n\n            if (resourceType !== \"uranium\") {\n              acc.push(drawLine(`${i}_1`, angle + groupAngle / 3, true));\n              acc.push(drawLine(`${i}_2`, angle + 2 * groupAngle / 3, true));\n            }\n\n            return acc;\n          }, [])}\n        </svg>\n      </SvgContainer>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 88px;\n  width: 88px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n`;\n\nconst SvgContainer = styled.div`\n  position: absolute;\n  height: 100%;\n  width: 100%;\n\n  svg {\n    transform: scale(1,-1);\n  }\n`;\n  \nconst IconAndPrice = styled.div`\n  padding-top: 16px;\n  padding-bottom: 2px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n\n  .dollar {\n    font-size: 12px;\n    vertical-align: super;\n  }\n`;\n\nconst Price = styled.div`\n  font-size: 20px;\n  display: flex;\n`;\n\nconst Dot = styled.div`\n  height: 3px;\n  width: 3px;\n  border-radius: 3px;\n  margin: 0 3px;\n  background-color: black;\n`;\n\nconst RestockRates = styled.div`\n  font-size: 8px;\n\n  color: #999;\n\n  .era-on {\n    color: black;\n  }\n`;\n\nconst ActionPanel = styled.div`\n  position: relative;\n  top: 4px;\n  height: 16px;\n  z-index: 1;\n`;\n","import { ActionType } from \"../generatedTypes\";\nimport { useGame } from \"./useGame\";\nimport { useMe } from \"./useMe\";\n\nexport const useActionOnMe = (actionType: ActionType): boolean => {\n  const { state } = useGame();\n  const me = useMe();\n\n  if (!me) {\n    return false;\n  }\n\n  if (state.auction && actionType === ActionType.BID_ON_PLANT) {\n    return state.auction.active === me.username;\n  }\n\n  return state.info.activeUser === me.username && actionType === state.info.actionType;\n}\n","import gql from 'graphql-tag';\n\nexport const PLANTS_QUERY = gql`\n  query GetPlants {\n    fetchPlants {\n      id\n      rank\n      resourceType\n      resourceBurn\n      numCities\n    }\n  }\n`;\n","import React from \"react\";\nimport { useQuery } from \"@apollo/client\";\nimport { GetPlants, GetPlants_fetchPlants } from \"../generatedTypes\";\nimport { PLANTS_QUERY } from \"../graphql/plantsQuery\";\n\ntype PlantMap = Record<string, GetPlants_fetchPlants>;\nexport type PlantGetter = (plantId: string) => GetPlants_fetchPlants | null;\n\nconst Context = React.createContext<PlantGetter>(() => null);\n\nexport const PlantProvider: React.FC = ({ children }) => {\n  const { data } = useQuery<GetPlants>(PLANTS_QUERY);\n\n  const plantsMap = React.useMemo<PlantMap>(() => {\n    if (!data || !data.fetchPlants) {\n      return {};\n    }\n\n    return data.fetchPlants.reduce<PlantMap>((acc, plant) => {\n      acc[plant.id] = plant;\n      return acc;\n    }, {});\n  }, [data]);\n\n  const plantGetter = (plantId: string) => plantsMap[plantId] || null;\n\n  if (!data) {\n    return null;\n  }\n\n  return <Context.Provider value={plantGetter}>{children}</Context.Provider>\n};\n\nexport const usePlantGetter = () => React.useContext(Context);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ResourceDial } from \"./ResourceDial\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { ResourceType } from \"../../constants\";\nimport { useActionOnMe } from \"../../hooks/useActionOnMe\";\nimport { ActionType } from \"../../generatedTypes\";\nimport { useMe } from \"../../hooks/useMe\";\nimport { hasPlantForResource, canFitOneMoreResource } from \"../../logic/resources\";\nimport { CartsContext } from \"../CartsContext\";\nimport { usePlantGetter } from \"../../hooks/usePlantGetter\";\n\ninterface ResourceMarketProps {}\n\nexport const ResourceMarket: React.FC<ResourceMarketProps> = () => {\n  const { state, restockRates } = useGame();\n  const { resourceCart } = React.useContext(CartsContext);\n  const me = useMe();\n  const actionOnMe = useActionOnMe(ActionType.BUY_RESOURCES);\n  const getPlant = usePlantGetter();\n\n  const getRatesForResource = (resourceType: ResourceType) => {\n    return [restockRates.era1, restockRates.era2, restockRates.era3]\n      .map(rates => rates[resourceType]);\n  }\n\n  const resources: ResourceType[] = [\"coal\", \"oil\", \"trash\", \"uranium\"];\n  \n  return (\n    <Container>\n      {resources.map((resourceType) => (\n        <ResourceDial\n          key={resourceType}\n          resourceType={resourceType}\n          era={state.info.era}\n          inStock={state.resourceMarket[resourceType]}\n          restockRates={getRatesForResource(resourceType)}\n          inCart={resourceCart.resources[resourceType]}\n          setInCart={resourceCart.setResource(resourceType)}\n          showIncrementor={actionOnMe && hasPlantForResource(resourceType, me, getPlant)}\n          disablePlus={!canFitOneMoreResource(resourceType, me, resourceCart.resources, state.resourceMarket, getPlant)}\n        />\n      ))}\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  padding: 24px 12px;\n  background-color: #ddd;\n  border-right: 1px solid black;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { resourceColors } from '../../constants';\nimport { ResourceIcon } from '../resources/ResourceIcon';\nimport { PlantResourceType, GetCurrentUser } from '../../generatedTypes';\nimport { CityIcon } from '../cities/CityIcon';\nimport { useQuery } from '@apollo/client';\nimport { GET_CURRENT_USER_QUERY } from '../../graphql/getCurrentUser';\n\nconst ASPECT_RATIO = 3;\nconst RADIUS_RATIO = 0.05;\nconst CITY_RATIO = 0.6\nconst RESOURCE_ICON_RATIO = 0.4;\n\ninterface PlantCardProps {\n  rank: number;\n  resourceType: PlantResourceType;\n  resourceBurn: number;\n  numCities: number;\n  height: number;\n}\n\nexport const PlantCard: React.FC<PlantCardProps> = (props) => {\n  const { data } = useQuery<GetCurrentUser>(GET_CURRENT_USER_QUERY);\n  const we = data && data.getCurrentUser && data.getCurrentUser.we;\n  \n  const rankDisplay = props.rank > 9 ? props.rank : ('0' + props.rank).slice(-2);\n\n  const resourceStack = props.resourceType === PlantResourceType.HYBRID ? (\n    <ResourceStack {...props} we={we}>\n      {Array(props.resourceBurn).fill(true).map((_, idx) => (\n        <div key={idx}>\n          <div>\n            <ResourceIcon type={props.resourceType} />\n          </div>\n        </div>\n      ))}\n    </ResourceStack>\n  ) : (\n    <ResourceStack {...props} we={we}>\n      <div>\n        <div>\n          <ResourceIcon type={props.resourceType} />\n        </div>\n      </div>\n      {props.resourceBurn > 1 &&\n        <div>\n          {Array(props.resourceBurn - 1).fill(true).map((_, idx) => (\n            <div key={idx}>\n              <ResourceIcon type={props.resourceType} />\n            </div>\n          ))}\n        </div>\n      }\n    </ResourceStack>\n  );\n  \n  return (\n    <Container {...props}>\n      <div>\n        <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 1 1\">\n          <text\n            x={0.5}\n            y={0.58}\n            textAnchor=\"middle\"\n            alignmentBaseline=\"middle\"\n            dominantBaseline=\"middle\"\n            fontSize={0.86}\n            fill=\"none\"\n            strokeWidth={0.03}\n            fontWeight={600}\n            stroke=\"black\"\n          >{rankDisplay}</text>\n        </svg>\n      </div>\n      <div>\n        {resourceStack}\n      </div>\n      <div>\n        <CityIcon\n          color=\"black\"\n          empty\n          height={CITY_RATIO * props.height}\n          number={props.numCities}\n          strokeWidth={0.5}\n        />\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div<PlantCardProps>`\n  display: flex;\n  height: ${({ height }) => height}px;\n  width: ${({ height }) => height * ASPECT_RATIO}px;\n  border: 1px solid black;\n  background-color: ${({ resourceType }) => resourceColors[resourceType as PlantResourceType]};\n  ${({ resourceType }) => resourceType === PlantResourceType.HYBRID ? `\n    background-image: linear-gradient(${resourceColors[PlantResourceType.COAL]} 50%, ${resourceColors[PlantResourceType.OIL]} 50%);\n  ` : \"\"}\n  border-radius: ${({ height }) => height * RADIUS_RATIO}px;\n  user-select: none;\n  position: relative;\n\n  > div {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0 ${({ height }) => height * 0.06}px;\n    width: ${({ height }) => 0.3 * height * ASPECT_RATIO}px;\n  }\n\n  > div:first-child {\n    width: ${({ height }) => 0.4 * height * ASPECT_RATIO}px;\n  }\n`;\n\nconst ResourceStack = styled.div<PlantCardProps & { we: boolean }>`\n  display: ${({ we, resourceType }) => resourceType === PlantResourceType.WIND && !we ? \"none\" : \"flex\"};\n  flex-direction: column;\n  height: ${({ height }) => height * 0.9}px;\n  justify-content: center;\n  align-items: center;\n\n  > div {\n    display: flex;\n    height: ${({ height, resourceType }) => (height * RESOURCE_ICON_RATIO * (resourceType === PlantResourceType.HYBRID ? 0.8 : 1))}px;\n    justify-content: center;\n\n    > div {\n      height: ${({ height }) => height * RESOURCE_ICON_RATIO}px;\n      display: flex;\n      align-items: center;\n    }\n  }\n`;\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { PlantCard } from \"./PlantCard\";\nimport { GetPlants_fetchPlants } from \"../../generatedTypes\";\n\ninterface PlantListProps {\n  plants: GetPlants_fetchPlants[];\n  emptyPlantIds?: string[];\n  isAvailable?: (plant: GetPlants_fetchPlants, idx: number) => boolean;\n  hoverable?: boolean;\n  handlePlantClick?: (plant: GetPlants_fetchPlants, index: number) => () => void;\n}\n\nexport const PlantList: React.FC<PlantListProps> = ({\n  plants,\n  isAvailable = () => true,\n  hoverable = false,\n  handlePlantClick = () => () => null,\n  emptyPlantIds = [],\n}) => {\n  const height = 36;\n\n  return (\n    <Container>\n      <Plants>\n        {plants.map((plant, idx) => (\n          <PlantContainer\n            available={isAvailable(plant, idx)}\n            hoverable={hoverable} \n            key={plant.id}\n            onClick={handlePlantClick(plant, idx)}\n          >\n            {emptyPlantIds.includes(plant.id) ? (\n              <PlantFrame height={height} />\n            ) : (\n              <PlantCard {...plant} height={height} />\n            )}\n          </PlantContainer>\n        ))}\n      </Plants>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  background-color: #ddd;\n  padding-top: 72px;\n  padding-bottom: 24px;\n`;\n\nconst Plants = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-left:\n`;\n\nconst PlantContainer = styled.div<{ available: boolean; hoverable: boolean }>`\n  margin-bottom: 2px;\n  opacity: ${({ available }) => available ? \"1\" : \"0.5\"};\n  border: 1px solid #eee;\n  border-radius: 3px;\n\n  ${({ available, hoverable }) => available && hoverable ? css`\n    :hover {\n      border: 1px solid black;\n      cursor: pointer;\n    }\n  ` : \"\"}\n`;\n\nconst PlantFrame = styled.div<{ height: number }>`\n    height: ${({ height }) => height}px;\n    width: ${({ height }) => height * 3}px;\n    border: 1px solid black;\n    border-radius: 3px;\n`;","import React from \"react\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { useActionOnMe } from \"../../hooks/useActionOnMe\";\nimport { ActionType, GetPlants_fetchPlants, PlantResourceType } from \"../../generatedTypes\";\nimport { PlantList } from \"./PlantList\";\nimport { CartsContext } from \"../CartsContext\";\nimport { usePlantGetter } from \"../../hooks/usePlantGetter\";\n\ninterface PlantMarketProps {}\n\nexport const PlantMarket: React.FC<PlantMarketProps> = () => {\n  const { state: { plantMarket, info, auction }, map } = useGame();\n  const { plantCart } = React.useContext(CartsContext);\n  const getPlants = usePlantGetter();\n  const actionOnMe = useActionOnMe(ActionType.PUT_UP_PLANT);\n\n  const isAvailable = (plant: GetPlants_fetchPlants, idx: number) => {\n    if (map.name === 'China' || info.era === 3) {\n      return true;\n    }\n    if (map.name === 'Northern Europe' && plant.rank === 7 && plant.resourceType === PlantResourceType.WIND) {\n      return true;\n    }\n    return (plantMarket.length - idx) < 5;\n  };\n\n  const handlePlantClick = (plant: GetPlants_fetchPlants, idx: number) => () => {\n    if (actionOnMe && isAvailable(plant, idx)) {\n      if (plantCart.selectedPlant && plant.id === plantCart.selectedPlant.id) {\n        plantCart.setSelectedPlant(null);\n      } else {\n        plantCart.setSelectedPlant(plant);\n      }\n    }\n  }\n  \n  return (\n    <PlantList\n      plants={plantMarket.slice().reverse().map(getPlants).sort((a, b) => b.rank - a.rank)}\n      isAvailable={isAvailable}\n      hoverable={actionOnMe}\n      handlePlantClick={handlePlantClick}\n      emptyPlantIds={auction && auction.plantId ? [auction.plantId] : []}\n    />\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Tab } from \"semantic-ui-react\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { PlantMarket } from \"./PlantMarket\";\nimport { PlantList } from \"./PlantList\";\nimport { usePlantGetter } from \"../../hooks/usePlantGetter\";\n\ninterface PlantsTabsProps {}\n\nexport const PlantsTabs: React.FC<PlantsTabsProps> = () => {\n  const { state: { deckCount, discardedPlants, era3Plants, possibleDeck, playerOrder }, map } = useGame();\n  const getPlant = usePlantGetter();\n  \n  const panes = [{\n    menuItem: \"Market\",\n    render: () => <PlantMarket />\n  }];\n\n  if (possibleDeck.length) {\n    panes.push({\n      menuItem: map.name === 'China' ? 'Deck' : `Deck (${deckCount})`,\n      render: () => <PlantList plants={possibleDeck.map(getPlant).sort((a, b) => a.rank - b.rank)} />\n    })\n  }\n\n  if (era3Plants.length) {\n    panes.push({\n      menuItem: \"Era 3\",\n      render: () => <PlantList plants={era3Plants.map(getPlant).sort((a, b) => a.rank - b.rank)} />\n    })\n  }\n\n  if (discardedPlants.length) {\n    panes.push({\n      menuItem: \"Discard\",\n      render: () => <PlantList plants={discardedPlants.map(getPlant).sort((a, b) => a.rank - b.rank)} />\n    })\n  };\n  \n  return (\n    <Container>\n      <Tab panes={panes} />\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  flex: 1;\n  background-color: #ddd;\n  width: 160px;\n  height: calc(100vh - 208px); // TODO: tied to height of action panel\n  overflow-y: auto;\n\n  .item {\n    font-size: 10px;\n    padding: 8px 4px !important;\n  }\n\n  > div {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n  }\n\n  .ui.attached.tabular.menu {\n    background: #ddd;\n    position: fixed;\n    z-index: 1;\n  }\n`;\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\nimport {\n  PlantResourceType,\n  Color,\n  ActionType,\n  Phase,\n  GameState_playerOrder,\n  GetPlants_fetchPlants,\n  GameState_plantPhaseEvents,\n} from \"../generatedTypes\";\nimport { PlantCard } from \"./plants/PlantCard\";\nimport { playerColors, ResourceType } from \"../constants\";\nimport { useMe } from \"../hooks/useMe\";\nimport { ResourceIcon } from \"./resources/ResourceIcon\";\nimport { CityIcon } from \"./cities/CityIcon\";\nimport { useGame } from \"../hooks/useGame\";\nimport { useActionOnMe } from \"../hooks/useActionOnMe\";\nimport { CartsContext } from \"./CartsContext\";\nimport { usePlantGetter, PlantGetter } from \"../hooks/usePlantGetter\";\n\ninterface PlayerBoxProps {\n  player: GameState_playerOrder;\n}\n\nconst getPlantEventText = (event: GameState_plantPhaseEvents, getPlant: PlantGetter): string => {\n  if (!event.plantId) {\n    return \"Passed\";\n  }\n  return `Bought the ${getPlant(event.plantId).rank} for $${event.cost}`;\n};\n\nexport const PlayerBox: React.FC<PlayerBoxProps> = ({ player }) => {\n  const me = useMe();\n  const isMe = me && me.username === player.username;\n  const { state } = useGame();\n  const { plantPhaseEvents, playerOrder, cityList, info: { phase } } = state;\n  const powerActionOnMe = useActionOnMe(ActionType.POWER_UP);\n  const discardActionOnMe = useActionOnMe(ActionType.DISCARD_PLANT);\n  const { discardCart, powerCart, cityCart } = React.useContext(CartsContext);\n  const getPlant = usePlantGetter();\n\n  const plantEvent = plantPhaseEvents.find((e) => e.username === player.username);\n\n  const is2P = playerOrder.length === 2;\n\n  const plants = player.plantIds ?\n    player.plantIds\n      .map(getPlant)\n      .sort((a, b) => a.rank - b.rank) :\n    [];\n  const plantsOrFrames = Array(is2P ? 4 : 3).fill(true).map((_, i) => plants[i] || null);\n\n  const numCities = React.useMemo(() => {\n    return cityList.filter((cityInstance) => (\n      cityInstance.occupants.some((name) => name === player.username)\n    )).length\n  }, [cityList]);\n\n  const resourceDisplay: Array<{ type: ResourceType; owned: number }> = Object.keys(player.resources)\n    .filter((resourceType) => player.resources[resourceType as ResourceType] > 0)\n    .map((resourceType) => ({\n      type: resourceType as ResourceType,\n      owned: player.resources[resourceType as ResourceType],\n    }));\n\n  const isPlantSelectable = (powerActionOnMe || discardActionOnMe) && isMe;\n\n  const isPlantSelected = (plant: GetPlants_fetchPlants): boolean => {\n    if (powerActionOnMe) {\n      return powerCart.plants.some(p => p.id === plant.id)\n    }\n\n    if (discardActionOnMe) {\n      return discardCart.selectedPlant && discardCart.selectedPlant.id === plant.id;\n    }\n\n    return false;\n  }\n\n  const handlePlantClick = (plant: GetPlants_fetchPlants): void => {\n    if (powerActionOnMe && isMe) {\n      powerCart.togglePlant(plant);\n    } else if (discardActionOnMe && isMe) {\n      discardCart.togglePlant(plant);\n    }\n  }\n\n  let adjustedMoney = player.money;\n  let adjustedCities = numCities;\n  if (isMe) {\n    adjustedMoney -= cityCart.cost;\n    adjustedCities += cityCart.cityIds.length;\n  }\n\n  return (\n    <Container color={player.color} is2P={is2P}>\n      {phase === Phase.PLANT && plantEvent && <PlantEventNotifier color={player.color}>\n        {getPlantEventText(plantEvent, getPlant)}\n      </PlantEventNotifier>}\n      <Name>\n        {`${player.username}${isMe ? \" (you)\" : \"\"}`}\n      </Name>\n      <MoneyAndCities is2P={is2P}>\n        <NumberStrikethrough struck={adjustedMoney !== player.money}>\n            <div>${player.money}</div>\n            <div>\n              {adjustedMoney !== player.money ? `${adjustedMoney < 0 ? \"-\" : \"\"}$${Math.abs(adjustedMoney)}` : \"\"}\n            </div>\n        </NumberStrikethrough>\n        <NumberStrikethrough struck={adjustedCities !== numCities}>\n            <div>\n              <span>{numCities}</span>\n              <span className=\"house-icon\"><CityIcon color={playerColors[player.color]} /></span>\n            </div>\n            <div>{adjustedCities !== numCities ? adjustedCities : \"\"}</div>\n          </NumberStrikethrough>\n      </MoneyAndCities>\n      <BottomSection is2P={is2P}>\n        <LeftColumn>\n          <Plants is2P={is2P}>\n            {plantsOrFrames.map((plant, idx) => (\n              plant ? (\n                <PlantContainer\n                  key={plant.rank}\n                  selectable={isPlantSelectable}\n                  onClick={() => handlePlantClick(plant)}\n                  isSelected={isPlantSelected(plant)}\n                >\n                  <PlantCard\n                    height={32}\n                    {...plant}\n                  />\n                </PlantContainer>\n              ) : (\n                <PlantContainer key={`EMPTY${idx}`} selectable={false} isSelected={false}>\n                  <PlantFrame />\n                </PlantContainer>\n              )\n            ))}\n          </Plants>\n        </LeftColumn>\n        <RightColumn is2P={is2P}>\n          {resourceDisplay.map(({ owned, type }) => (\n            <ResourceContainer key={type}>\n              <div className=\"resource-icon\">\n                <ResourceIcon type={type.toUpperCase() as PlantResourceType} withColor />\n              </div>\n              <div>{owned}</div>\n            </ResourceContainer>\n          ))}\n        </RightColumn>\n      </BottomSection>\n    </Container>\n  );\n}\n\nconst Container = styled.div<{ color: Color; is2P: boolean; }>`\n  display: flex;\n  flex-direction: column;\n  width: ${({ is2P }) => is2P ? 212 : 160}px;\n  height: 208px;\n  z-index: 1001;\n  background-color: #ddd;\n  border: 4px solid ${({ color }) => playerColors[color as Color]};\n  position: relative;\n`;\n\nconst MoneyAndCities = styled.div<{ is2P: boolean; }>`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: ${({ is2P }) => is2P ? 0 : 4}px;\n`;\n\nconst PlantEventNotifier = styled.div<{ color: Color }>`\n  background-color: ${({ color }) => playerColors[color as Color]};\n  height: 32px;\n  position: absolute;\n  bottom: calc(100% + 4px);\n  left: -4px;\n  width: calc(100% + 8px);\n  display: flex;\n  align-items: center;\n  padding-left: 8px;\n`;\n\nconst PlantContainer = styled.div<{ selectable: boolean; isSelected: boolean }>`\n  border: 2px solid #ddd;\n  border-radius: 4px;\n\n  ${({ selectable }) => selectable ? css`\n    :hover {\n      border: 2px solid black;\n      cursor: pointer;\n    }\n  ` : \"\"}\n\n  ${({ isSelected }) => isSelected ? css`\n    border: 2px solid black;\n` : \"\"}\n`;\n\nconst ResourceContainer = styled.div`\n  height: 28px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  .resource-icon {\n    height: 16px;\n    width: 16px;\n    margin-left: 2px;\n    margin-right: 2px;\n    display: flex;\n  }\n`;\n\nconst BottomSection = styled.div<{ is2P: boolean; }>`\n  flex: 1;\n  display: flex;\n  flex-direction: ${({ is2P }) => is2P ? \"column\" : \"row\"};\n`;\n\nconst LeftColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst RightColumn = styled.div<{ is2P: boolean; }>`\n  display: flex;\n  flex-direction: ${({ is2P }) => is2P ? \"row\" : \"column\"};\n  align-items: center;\n  flex: 1;\n`;\n\nconst Plants = styled.div<{ is2P: boolean; }>`\n  border-${({ is2P }) => is2P ? \"bottom\" : \"right\"}: 1px solid black;\n  padding: 2px;\n  justify-self: flex-end;\n  display: flex;\n  flex-direction: ${({ is2P }) => is2P ? \"row\" : \"column\"};\n  flex-wrap: wrap;\n`;\n\nconst PlantFrame = styled.div`\n  height: 32px;\n  width: 96px;\n  border: 1px solid black;\n  border-radius: 2px;\n`;\n\nconst Name = styled.div`\n  padding: 4px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: flex;\n  margin-bottom: 4px;\n\n  > span:nth-child(2) {\n    margin-left: 4px;\n  }\n`;\n\nconst NumberStrikethrough = styled.div<{ struck?: boolean }>`\n  padding: 4px;\n\n  ${({ struck }) => struck ? css`\n    > div:first-child {\n      text-decoration: line-through;\n    }\n  ` : ''}\n\n  > div:nth-child(2) {\n    color: red;\n  }\n\n  > div {\n    margin-bottom: 4px;\n    height: 18px;\n    display: flex;\n  }\n\n  .house-icon {\n    height: 16px;\n    margin-left: 4px;\n  }\n`;\n","import { useMutation } from \"@apollo/client\";\nimport { toast } from \"react-toastify\";\n\nexport function useGameMutation<T, TVariables>(mutation: any, onCompleted?: () => void) {\n  return useMutation<T, TVariables>(mutation, {\n    onError: (error) => toast.error(error.message),\n    ...(onCompleted ? { onCompleted } : {})\n  });\n}\n","import gql from \"graphql-tag\";\nimport { GameStateFragment } from \"./gameStateFragment\";\n\nexport const PUT_UP_PLANT_MUTATION = gql`\n  mutation PutUpPlant($gameId: ID!, $plantId: String, $bid: Int) {\n    putUpPlant(gameId: $gameId, plantId: $plantId, bid: $bid) {\n      ...GameState\n    }\n  }\n\n  # Fragments\n  ${GameStateFragment}\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Button, Input } from \"semantic-ui-react\";\nimport { PlantCart } from \"../../hooks/usePlantCart\";\nimport { PlantCard } from \"../plants/PlantCard\";\nimport { useGameMutation } from \"../../hooks/useGameMutation\";\nimport { PutUpPlant, PutUpPlantVariables } from \"../../generatedTypes\";\nimport { PUT_UP_PLANT_MUTATION } from \"../../graphql/putUpPlantMutation\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { useMe } from \"../../hooks/useMe\";\n\ninterface PutUpPlantPanelProps {\n  plantCart: PlantCart;\n}\n\nexport const PutUpPlantPanel: React.FC<PutUpPlantPanelProps> = ({ plantCart }) => {\n  const { selectedPlant } = plantCart;\n\n  const game = useGame();\n  const me = useMe();\n  const [putUpPlant, { loading }] = useGameMutation<PutUpPlant, PutUpPlantVariables>(PUT_UP_PLANT_MUTATION);\n\n  const [isPassState, setIsPass] = React.useState<boolean>(false);\n  const [bid, setBid] = React.useState<number>(null);\n\n  React.useEffect(() => {\n    setBid(plantCart.selectedPlant && plantCart.selectedPlant.rank);\n  }, [plantCart.selectedPlant]);\n\n  const handleBidChange = (e: React.ChangeEvent) => {\n    const newBid = Number((e.target as HTMLInputElement).value);\n    setBid(newBid);\n  }\n\n  const handleSubmit = (isPass: boolean = false) => {\n    const plantId = isPass ?\n      null :\n      (plantCart.selectedPlant && plantCart.selectedPlant.id);\n\n    setIsPass(isPass);\n    \n    putUpPlant({\n      variables: {\n        gameId: game.id,\n        plantId,\n        bid: isPass ? null : Math.ceil(bid)\n      }\n    });\n  }\n  \n  return (\n    <Container>\n      <div className=\"heading\">Choose a power plant</div>\n      {selectedPlant ? (\n        <PlantCard {...selectedPlant} height={32} />\n      ) : (\n        <PlantFrame />\n      )}\n      <div className=\"bid\">\n        {selectedPlant && (\n          <React.Fragment>\n            <Button\n              primary\n              disabled={bid < plantCart.selectedPlant.rank || bid > me.money || loading}\n              loading={loading && !isPassState}\n              onClick={() => handleSubmit()}\n            >Bid</Button>\n            <Input type=\"number\" onChange={handleBidChange} value={bid || \"\"} min={plantCart.selectedPlant.rank} step={1} />\n          </React.Fragment>\n        )}\n      </div>\n      {game.state.info.turn > 1 && (\n        <div className=\"pass\">\n          <Button\n            secondary\n            onClick={() => handleSubmit(true)}\n            disabled={loading}\n            loading={loading && isPassState}\n          >Pass</Button>\n        </div>\n      )}\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .heading {\n    padding-top: 24px;\n    height: 68px;\n  }\n\n  .bid {\n    display: flex;\n    justify-content: center;\n    padding-top: 20px;\n    padding-bottom: 4px;\n\n    input {\n      width: 60px;\n    }\n  }\n\n  .pass {\n    display: flex;\n    position: absolute;\n    bottom: 12px;\n  }\n`;\n\nconst PlantFrame = styled.div`\n  height: 32px;\n  width: 96px;\n  border: 1px solid black;\n  border-radius: 2px;\n`;","import gql from \"graphql-tag\";\nimport { GameStateFragment } from \"./gameStateFragment\";\n\nexport const BID_ON_PLANT_MUTATION = gql`\n  mutation BidOnPlant($gameId: ID!, $bid: Int) {\n    bidOnPlant(gameId: $gameId, bid: $bid) {\n      ...GameState\n    }\n  }\n\n  # Fragments\n  ${GameStateFragment}\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ActionType, BidOnPlant, BidOnPlantVariables, GameState_playerOrder } from \"../../generatedTypes\";\nimport { playerColors } from \"../../constants\";\nimport { PlantCard } from \"../plants/PlantCard\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { useMe } from \"../../hooks/useMe\";\nimport { useActionOnMe } from \"../../hooks/useActionOnMe\";\nimport { BID_ON_PLANT_MUTATION } from \"../../graphql/bidOnPlantMutation\";\nimport { useGameMutation } from \"../../hooks/useGameMutation\";\nimport { Button, Input, Checkbox } from \"semantic-ui-react\";\nimport { usePlantGetter } from \"../../hooks/usePlantGetter\";\n\ninterface AuctionPanelProps {}\n\nexport const AuctionPanel: React.FC<AuctionPanelProps> = () => {\n  const { id, state } = useGame();\n  const { auction, playerOrder: players, plantPhaseEvents } = state;\n  const me = useMe();\n  const actionOnMe = useActionOnMe(ActionType.BID_ON_PLANT);\n  const getPlant = usePlantGetter();\n\n  const [bidOnPlant, { loading }] = useGameMutation<BidOnPlant, BidOnPlantVariables>(BID_ON_PLANT_MUTATION);\n  const [isPassState, setIsPass] = React.useState<boolean>(false);\n\n  const [bid, setBid] = React.useState<number>(auction.bid + 1);\n  const [isAutobid, setAutobid] = React.useState(false);\n\n  const bidIsDisabled = !me || !actionOnMe || bid <= auction.bid || bid > me.money || loading;\n  \n  React.useEffect(() => {\n    if (auction.bid >= bid) {\n      setBid(auction.bid + 1);\n      setAutobid(false);\n    }\n  }, [auction.bid]);\n\n  React.useEffect(() => {\n    if (!bidIsDisabled && isAutobid && auction.bid < bid) {\n      bidOnPlant({\n        variables: {\n          gameId: id,\n          bid: auction.bid + 1\n        },\n      })\n    }\n  }, [auction.bid, bidIsDisabled, isAutobid]);\n  \n  const { clockwiseOrder = 0 } = me && players.find((p) => p.username === me.username) || {};\n\n  const getRelativeOrder = (p: GameState_playerOrder) =>\n    (p.clockwiseOrder + players.length - clockwiseOrder) % players.length;\n  \n  const auctionOrder = players\n    .filter((player) => (plantPhaseEvents || []).every((e) => e.username !== player.username))\n    .filter((player) => (auction.passed || []).every((p) => p !== player.username))\n    .sort((a, b) => getRelativeOrder(a) - getRelativeOrder(b));\n\n  const handleInputChange = (e: React.ChangeEvent) => {\n    const newBid = Number((e.target as HTMLInputElement).value);\n\n    if (!newBid) {\n      setBid(0);\n    } else {\n      setBid(newBid);\n    }\n  }\n\n  const handleBidSubmit = (isPass: boolean = false) => {\n    setIsPass(isPass);\n    \n    bidOnPlant({\n      variables: {\n        gameId: id,\n        bid: isPass ? null : bid\n      }\n    });\n  }\n  \n  const drawSector = (player: GameState_playerOrder, index: number) => {\n    const numRemaining = auctionOrder.length;\n    const theta = 2 * Math.PI / numRemaining;\n    const R = 0.9;\n\n    const theta0 = theta * index;\n    const x1 = R * Math.cos(theta0 - theta / 2);\n    const y1 = R * Math.sin(theta0 - theta / 2);\n    const x2 = R * Math.cos(theta0 + theta / 2);\n    const y2 = R * Math.sin(theta0 + theta / 2);\n    const xName = 1.02 * R * Math.cos(theta0);\n    const yName = 1.02 * R * Math.sin(theta0);\n    const xBid = 0.7 * R * Math.cos(theta0);\n    const yBid = 0.7 * R * Math.sin(theta0);\n\n    const textRotation = theta0 * 180 / Math.PI + 90;\n    const { username } = player;\n    const name = `${username.slice(0, 12)}${username.length > 12 ? \"...\" : \"\"}`;\n\n    const isActive = auction.active === username;\n    const isLeading = auction.leader === username;\n\n    return (\n      <React.Fragment key={player.username}>\n        <path\n          fill={playerColors[player.color]}\n          d={`\n            M 0 0\n            L ${x1} ${y1}\n            A ${R} ${R} 0 0 1 ${x2} ${y2}\n            Z\n          `}\n        />\n        {(!me || index > 0 || auctionOrder[0].username !== me.username) && (\n          <g transform={`translate(${xName}, ${yName}) rotate(${textRotation})`}>\n            <text x={0} y={0} textAnchor=\"middle\" style={{ fontSize: \"0.125\" }}>{name}</text>\n          </g>\n        )}\n        {isLeading && (\n          <text\n            x={xBid}\n            y={yBid}\n            textAnchor=\"middle\"\n            alignmentBaseline=\"middle\"\n            dominantBaseline=\"middle\"\n            style={{ fontSize: 0.25 }}\n          >{auction.bid}</text>\n        )}\n        {isActive && (\n          <text\n            x={xBid}\n            y={yBid}\n            textAnchor=\"middle\"\n            alignmentBaseline=\"middle\"\n            dominantBaseline=\"middle\"\n            style={{ fontSize: 0.25 }}\n          >!</text>\n        )}\n      </React.Fragment>\n    );\n  }\n  \n  return (\n    <Container>\n      <SvgContainer>\n        <svg width=\"100%\" height=\"100%\" viewBox=\"-1 -1 2 2\">\n          {auctionOrder.map(drawSector)}\n        </svg>\n        <PlantSpacer>\n          <PlantCard height={28} {...getPlant(auction.plantId)} />\n        </PlantSpacer>\n      </SvgContainer>\n      {me && auctionOrder[0].username === me.username && (\n        <BidForm>\n          <Checkbox label=\"Autobid\" checked={isAutobid} onClick={() => setAutobid(!isAutobid)} />\n          <div>\n            <Input type=\"number\" step={1} min={auction.bid + 1} value={bid || \"\"} onChange={handleInputChange} />\n          </div>\n          <Button.Group vertical>\n            <Button\n              primary\n              disabled={bidIsDisabled}\n              loading={loading && !isPassState}\n              onClick={() => handleBidSubmit()}\n            >Bid</Button>\n            <Button \n              secondary\n              disabled={!me || !actionOnMe || loading}\n              loading={loading && isPassState}\n              onClick={() => handleBidSubmit(true)}\n            >Pass</Button>\n          </Button.Group>\n        </BidForm>\n      )}\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #ddd;\n  padding: 12px;\n`;\n\nconst SvgContainer = styled.div`\n  width: 188px;\n  height: 188px;\n  position: relative;\n`;\n\nconst PlantSpacer = styled.div`\n  position: absolute;\n  top: calc(50% - 14px);\n  left: calc(50% - 42px);\n  transform: rotate(-90deg);\n`;\n\nconst BidForm = styled.div`\n  div:first-child {\n    margin-bottom: 4px;\n  }\n\n  input {\n    width: 64px;\n  }\n\n  display: flex;\n  flex-direction: column;\n\n  button {\n    width: 64px !important;\n    padding-left: 0 !important;\n    padding-right: 0 !important;\n  }\n`;\n","import gql from \"graphql-tag\";\nimport { GameStateFragment } from \"./gameStateFragment\";\n\nexport const BUY_RESOURCES_MUTATION = gql`\n  mutation BuyResources($gameId: ID!, $resources: ResourcesInput!, $cost: Int!) {\n    buyResources(gameId: $gameId, resources: $resources, cost: $cost) {\n      ...GameState\n    }\n  }\n\n  # Fragments\n  ${GameStateFragment}\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ResourceCart } from \"../../hooks/useResourceCart\";\nimport { useGameMutation } from \"../../hooks/useGameMutation\";\nimport { BuyResourcesVariables, BuyResources } from \"../../generatedTypes\";\nimport { BUY_RESOURCES_MUTATION } from \"../../graphql/buyResourcesMutation\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { getTotalResourceCost } from \"../../logic/resources\";\nimport { Button } from \"semantic-ui-react\";\n\ninterface BuyResourcesPanelProps {\n  resourceCart: ResourceCart;\n}\n\nexport const BuyResourcesPanel: React.FC<BuyResourcesPanelProps> = ({ resourceCart }) => {\n  const { state: { resourceMarket }, id } = useGame();\n  \n  const [buyResources, { loading }] = useGameMutation<BuyResources, BuyResourcesVariables>(BUY_RESOURCES_MUTATION);\n\n  const cartCost = getTotalResourceCost(resourceMarket, resourceCart.resources);\n\n  const handleSubmit = () => {\n    buyResources({\n      variables: {\n        gameId: id,\n        resources: resourceCart.resources,\n        cost: cartCost\n      }\n    });\n  }\n  \n  \n  return (\n    <Container>\n      <div>Purchase resources</div>\n      <div className=\"btn-container\">\n        <Button\n          primary={!!cartCost}\n          secondary={!cartCost}\n          disabled={loading}\n          loading={loading}\n          onClick={handleSubmit}\n        >\n          {cartCost ? `Buy for $${cartCost}` : \"Pass\"}\n        </Button>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 0;\n`;\n","import gql from \"graphql-tag\";\nimport { GameStateFragment } from \"./gameStateFragment\";\n\nexport const BUY_CITIES_MUTATION = gql`\n  mutation BuyCities($gameId: ID!, $cityIds: [String!]!, $cost: Int!) {\n    buyCities(gameId: $gameId, cityIds: $cityIds, cost: $cost) {\n      ...GameState\n    }\n  }\n\n  # Fragments\n  ${GameStateFragment}\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { ActionType, BuyCities, BuyCitiesVariables, Game_map_cities } from \"../../generatedTypes\";\nimport { useActionOnMe } from \"../../hooks/useActionOnMe\";\nimport { useMe } from \"../../hooks/useMe\";\nimport { useGameMutation } from \"../../hooks/useGameMutation\";\nimport { CityCart } from \"../../hooks/useCityCart\";\nimport { BUY_CITIES_MUTATION } from \"../../graphql/buyCitiesMutation\";\nimport { Button } from \"semantic-ui-react\";\n\ninterface BuyCitiesPanelProps {\n  cityCart: CityCart;\n}\n\nexport const BuyCitiesPanel: React.FC<BuyCitiesPanelProps> = ({ cityCart }) => {\n  const { map, id } = useGame();\n  const me = useMe();\n  const actionOnMe = useActionOnMe(ActionType.BUY_CITIES);\n  const [buyCities, { loading }] = useGameMutation<BuyCities, BuyCitiesVariables>(BUY_CITIES_MUTATION, cityCart.clearCart);\n\n  const cities = map.cities || [];\n\n  const cityLookup = React.useMemo(() => {\n    return cities.reduce<Record<string, Game_map_cities>>((acc, city) => {\n      acc[city.id] = city;\n      return acc;\n    }, {});\n  }, [cities]);\n\n  const cityNames = cityCart.cityIds.map((id) => cityLookup[id].name);\n\n  const displayedCost = cityCart.cost === null ? \"--\" : `$${cityCart.cost}`;\n\n  const buttonText = cityNames.length ? `Buy for ${displayedCost}` : \"Pass on cities\";\n\n  const handleSubmit = () => {\n    buyCities({\n      variables: {\n        gameId: id,\n        cityIds: cityCart.cityIds,\n        cost: cityCart.cost\n      }\n    })\n  };\n  \n  return (\n    <Container>\n      <div>Purchase cities</div>\n      <List>\n        {cityNames.map((cityName) => <div key={cityName}>{cityName}</div>)}\n      </List>\n      <ButtonContainer>\n        <Button\n          primary={cityNames.length > 0}\n          secondary={cityNames.length === 0}\n          onClick={handleSubmit}\n          disabled={!me || !actionOnMe || cityCart.cost > me.money || loading}\n          loading={loading}\n        >{buttonText}</Button>\n      </ButtonContainer>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px;\n`;\n\nconst List = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  width: 100%;\n  height: calc(100% - 84px);\n\n  > div {\n    height: 16px;\n    font-size: 14px;\n    margin-bottom: 4px;\n  }\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n","import gql from \"graphql-tag\";\n\nexport const GET_REVENUES_QUERY = gql`\n  query GetRevenues {\n    getRevenues\n  }\n`;\n","import gql from \"graphql-tag\";\nimport { GameStateFragment } from \"./gameStateFragment\";\n\nexport const POWER_UP_MUTATION = gql`\n  mutation PowerUp($gameId: ID!, $plantIds: [String!]!, $hybridChoice: HybridChoiceInput) {\n    powerUp(gameId: $gameId, plantIds: $plantIds, hybridChoice: $hybridChoice) {\n      ...GameState\n    }\n  }\n\n  # Fragments\n  ${GameStateFragment}\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { PowerCart } from \"../../hooks/usePowerCart\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { useMe } from \"../../hooks/useMe\";\nimport { CityIcon, Arrow } from \"../cities/CityIcon\";\nimport { useQuery } from \"@apollo/client\";\nimport { GET_REVENUES_QUERY } from \"../../graphql/getRevenuesQuery\";\nimport { GetRevenues, PlantResourceType, PowerUp, PowerUpVariables } from \"../../generatedTypes\";\nimport { getNumCitiesPowered, hasEnoughResources, getHybridChoices } from \"../../logic/power\";\nimport { ResourceIcon } from \"../resources/ResourceIcon\";\nimport { useGameMutation } from \"../../hooks/useGameMutation\";\nimport { POWER_UP_MUTATION } from \"../../graphql/powerUpMutation\";\nimport { Button } from \"semantic-ui-react\";\n\ninterface PowerUpPanelProps {\n  powerCart: PowerCart;\n}\n\nexport const PowerUpPanel: React.FC<PowerUpPanelProps> = ({ powerCart }) => {\n  const { state: { cityList }, id } = useGame();\n  const me = useMe();\n  const { data } = useQuery<GetRevenues>(GET_REVENUES_QUERY);\n  const [powerUp, { loading }] = useGameMutation<PowerUp, PowerUpVariables>(POWER_UP_MUTATION);\n\n  const numPowered = getNumCitiesPowered(powerCart.plants, cityList, me.username);\n  const earnings = numPowered ? (data ? data.getRevenues[numPowered] : null) : 10;\n\n  const hasResources = hasEnoughResources(powerCart.plants, me.resources);\n  const hybridChoices = hasResources ? getHybridChoices(powerCart.plants, me.resources) : [];\n\n  const [hybridChoiceIdx, setHybridChoiceIdx] = React.useState<number>(0);\n\n  React.useEffect(() => {\n    if (hybridChoices.length > 0 && hybridChoiceIdx >= hybridChoices.length) {\n      setHybridChoiceIdx(hybridChoices.length - 1);\n    }\n  });\n\n  const handleSubmit = () => {\n    const hybridChoice = (hybridChoices.length > 1 && hybridChoices[hybridChoiceIdx]) || null;\n    \n    powerUp({\n      variables: {\n        gameId: id,\n        plantIds: powerCart.plants.map((p) => p.id),\n        hybridChoice\n      }\n    });\n  }\n  \n  return (\n    <Container>\n      <div className=\"heading\">Choose plants to power</div>\n      <div className=\"power-info\">\n        <CityIcon color=\"black\" empty height={40} number={numPowered} strokeWidth={0.5} />\n        <Arrow />\n        <div>${earnings || \"...\"}</div>\n      </div>\n      <div className=\"hybrid-choices\">\n        {hybridChoices.length > 1 && hybridChoices.map((choice, idx) => (\n          <HybridChoice\n            key={choice.oil}\n            isSelected={idx === hybridChoiceIdx}\n            onClick={() => setHybridChoiceIdx(idx)}\n          >\n            <div>\n              <div className=\"resource-icon\">\n                <ResourceIcon withColor type={PlantResourceType.COAL} />\n              </div>\n              <div>{choice.coal}</div>\n            </div>\n            <div>\n              <div className=\"resource-icon\">\n                <ResourceIcon withColor type={PlantResourceType.OIL} />\n              </div>\n              <div>{choice.oil}</div>\n            </div>\n          </HybridChoice>\n        ))}\n      </div>\n      <div className=\"btn-container\">\n        <Button\n          primary\n          disabled={!hasResources || loading}\n          loading={loading}\n          onClick={handleSubmit}\n        >Power up!</Button>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px;\n\n  .power-info {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 18px;\n  }\n\n  .hybrid-choices {\n    display: flex;\n    justify-content: center;\n\n    > div:first-child {\n      margin-left: 0;\n    }\n\n    .resource-icon {\n      height: 16px;\n      width: 16px;\n      margin: 0 2px;\n    }\n  }\n`;\n\nconst HybridChoice = styled.div<{ isSelected: boolean }>`\n  opacity: ${({ isSelected }) => isSelected ? 1 : 0.3};\n  cursor: pointer;\n  margin-left: 4px;\n  width: 30px;\n  height: 48px;\n  border: 1px solid black;\n  border-radius: 2px;\n  font-size: 14px;\n\n  > div {\n    display: flex;\n    align-items: center;\n    height: 24px;\n  }\n`;\n","import { GetPlants_fetchPlants, GameState_cityList, ResourcesInput, HybridChoiceInput, PlantResourceType } from \"../generatedTypes\";\n\nexport const getNumCitiesPowered = (plants: GetPlants_fetchPlants[], cities: GameState_cityList[], myName: string): number => {\n  const powerCapacity = plants.reduce<number>((acc, plant) => {\n    return acc + plant.numCities;\n  }, 0);\n\n  const numCities = cities.filter((cityInstance) => (\n    cityInstance.occupants.some((p) => p === myName)\n  )).length;\n\n  return Math.min(powerCapacity, numCities);\n}\n\nexport const hasEnoughResources = (\n  plants: GetPlants_fetchPlants[],\n  resources: ResourcesInput\n): boolean => {\n  const resourcesNeeded = plants\n    .reduce<Partial<Record<PlantResourceType, number>>>((acc, plant) => {\n      const { resourceType, resourceBurn } = plant;\n\n      if (resourceType !== PlantResourceType.WIND) {\n        acc[resourceType] = acc[resourceType] || 0;\n        acc[resourceType] += resourceBurn;\n      }\n      \n      return acc;\n    }, {});\n\n  const resourcesCopy = { ...resources };\n\n  return [\n    PlantResourceType.COAL,\n    PlantResourceType.OIL,\n    PlantResourceType.TRASH,\n    PlantResourceType.URANIUM,\n    PlantResourceType.HYBRID\n  ].every((r) => {\n    const numResources = resourcesNeeded[r] || 0;\n    if (r === PlantResourceType.HYBRID) {\n      return numResources <= resourcesCopy.coal + resourcesCopy.oil;\n    }\n    \n    const rLower = r.toLowerCase() as keyof ResourcesInput;\n    if (numResources > resourcesCopy[rLower]) {\n      return false;\n    }\n\n    resourcesCopy[rLower] -= numResources;\n    return true;\n  });\n}\n\nexport const getHybridChoices = (\n  plants: GetPlants_fetchPlants[],\n  resources: ResourcesInput\n): HybridChoiceInput[] => {\n  let myCoal = resources.coal;\n  let myOil = resources.oil;\n  let hybridNeeded = 0;\n\n  plants.forEach((plant) => {\n    if (plant.resourceType === PlantResourceType.COAL) {\n      myCoal -= plant.resourceBurn;\n    }\n\n    if (plant.resourceType === PlantResourceType.OIL) {\n      myOil -= plant.resourceBurn;\n    }\n\n    if (plant.resourceType === PlantResourceType.HYBRID) {\n      hybridNeeded += plant.resourceBurn;\n    }\n  });\n\n  return Array(hybridNeeded + 1)\n    .fill(true)\n    .map((_, index) => ({\n      coal: hybridNeeded - index,\n      oil: index\n    }))\n    .filter((hybridChoice) => (\n      hybridChoice.coal <= myCoal && hybridChoice.oil <= myOil\n    ));\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ActionType, Color } from \"../../generatedTypes\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { playerColors } from \"../../constants\";\n\ninterface WaitingPanelProps {}\n\nconst actionTypeToText: Record<ActionType, string> = {\n  [ActionType.PUT_UP_PLANT]: \"is choosing a plant\",\n  [ActionType.BID_ON_PLANT]: \"\",\n  [ActionType.DISCARD_PLANT]: \"is discarding a plant\",\n  [ActionType.BUY_RESOURCES]: \"is buying resources\",\n  [ActionType.BUY_CITIES]: \"is buying cities\",\n  [ActionType.POWER_UP]: \"is powering up\"\n};\n\nexport const WaitingPanel: React.FC<WaitingPanelProps> = () => {\n  const { state: { playerOrder, info } } = useGame();\n\n  const { username, color } = playerOrder\n    .find((player) => player.username === info.activeUser);\n\n  const text = `${username} ${actionTypeToText[info.actionType]}`;\n  \n  return (\n    <Container color={color}>\n      <Text>{text}</Text>\n    </Container>\n  );\n}\n\nconst Container = styled.div<{ color: Color; }>`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ${({ color }) => playerColors[color as Color]};\n`;\n\nconst Text = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 40px;\n  background-color: #ddd;\n  height: calc(100% - 16px);\n  width: calc(100% - 16px);\n  text-align: center;\n`;","import gql from \"graphql-tag\";\nimport { GameStateFragment } from \"./gameStateFragment\";\n\nexport const DISCARD_PLANT_MUTATION = gql`\n  mutation DiscardPlant($gameId: ID!, $plantId: String!, $hybridChoice: HybridChoiceInput) {\n    discardPlant(gameId: $gameId, plantId: $plantId, hybridChoice: $hybridChoice) {\n      ...GameState\n    }\n  }\n\n  # Fragments\n  ${GameStateFragment}\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { DiscardCart } from \"../../hooks/useDiscardCart\";\nimport { PlantCard } from \"../plants/PlantCard\";\nimport { getResourceCapacity } from \"../../logic/resources\";\nimport { PlantResourceType, GameState_playerOrder, GetPlants_fetchPlants } from \"../../generatedTypes\";\nimport { useGameMutation } from \"../../hooks/useGameMutation\";\nimport { DiscardPlant, DiscardPlantVariables } from \"../../generatedTypes\";\nimport { DISCARD_PLANT_MUTATION } from \"../../graphql/discardPlantMutation\";\nimport { useMe } from \"../../hooks/useMe\";\nimport { ResourceIcon } from \"../resources/ResourceIcon\";\nimport { Button } from \"semantic-ui-react\";\nimport { usePlantGetter } from \"../../hooks/usePlantGetter\";\n\ninterface DiscardPlantPanelProps {\n  discardCart: DiscardCart;\n}\n\nconst getResourceLoss = (\n  me: GameState_playerOrder,\n  discardedPlant: GetPlants_fetchPlants,\n  getPlant: (plantId: string) => GetPlants_fetchPlants,\n): Array<{ type: PlantResourceType; amount: number }> => {\n  const plantsAfterDiscard = me.plantIds.filter((id) => id !== discardedPlant.id).map(getPlant);\n  const newCapacity = getResourceCapacity(plantsAfterDiscard);\n\n  const uranium = Math.max(me.resources.uranium - newCapacity.URANIUM, 0);\n  const trash = Math.max(me.resources.trash - newCapacity.TRASH, 0);\n\n  // TODO: resource choice\n  const coal = Math.max(me.resources.coal - newCapacity.COAL, 0);\n  const oil = Math.max(me.resources.oil - newCapacity.OIL, 0);\n\n  return [{\n    type: PlantResourceType.COAL,\n    amount: coal\n  }, {\n    type: PlantResourceType.OIL,\n    amount: oil\n  }, {\n    type: PlantResourceType.TRASH,\n    amount: trash\n  }, {\n    type: PlantResourceType.URANIUM,\n    amount: uranium\n  }].filter(({ amount }) => amount > 0)\n}\n\n// const amountToDiscard = leftoverCoal + leftoverOil - resourceCapacity.HYBRID;\n// if (amountToDiscard > 0 && leftoverCoal > 0 && leftoverOil > 0) {\n//   if (!fossilFuelDiscard) {\n//     throw new Error(\"ERROR: must provide coal/oil discard choice\");\n//   }\n  \n//   if (fossilFuelDiscard.coal + fossilFuelDiscard.oil !== amountToDiscard) {\n//     throw new Error(\"ERROR: discarding incorrect amount of coal/oil\");\n//   }\n\n//   me.resources.coal -= fossilFuelDiscard.coal;\n//   me.resources.oil -= fossilFuelDiscard.oil;\n// } else if (amountToDiscard > 0) {\n//   me.resources.coal -= leftoverCoal;\n//   me.resources.oil -= leftoverOil;\n// }\n\nexport const DiscardPlantPanel: React.FC<DiscardPlantPanelProps> = ({ discardCart }) => {\n  const game = useGame();\n  const me = useMe();\n  const getPlant = usePlantGetter();\n  const [discardPlant, { loading }] = useGameMutation<DiscardPlant, DiscardPlantVariables>(DISCARD_PLANT_MUTATION);\n\n  const { selectedPlant } = discardCart;\n\n  const resourceLoss = selectedPlant ? getResourceLoss(me, selectedPlant, getPlant) : [];\n\n  const handleSubmit = (): void => {\n    discardPlant({\n      variables: {\n        gameId: game.id,\n        plantId: selectedPlant.id\n      }\n    })\n  };\n\n  return (\n    <Container>\n      <div className=\"heading\">Discard a power plant</div>\n      {selectedPlant ? (\n        <PlantCard {...selectedPlant} height={32} />\n      ) : (\n        <PlantFrame />\n      )}\n      <div className=\"resource-loss\">\n        {resourceLoss.map((loss) => (\n          <ResourceContainer key={loss.type}>\n            <div>-{loss.amount}</div>\n            <div className=\"resource-icon\">\n              <ResourceIcon type={loss.type} withColor />\n            </div>\n          </ResourceContainer>\n        ))}\n      </div>\n      <div className=\"btn-container\">\n        <Button\n          primary\n          disabled={!me || !selectedPlant || loading}\n          loading={loading}\n          onClick={handleSubmit}\n        >Discard</Button>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .heading {\n    padding-top: 24px;\n    height: 60px;\n  }\n\n  .resource-loss {\n    height: 50px;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n  }\n\n  .btn-container {\n    position: absolute;\n    bottom: 12px;\n  }\n\n`;\n\nconst PlantFrame = styled.div`\n  height: 32px;\n  width: 96px;\n  border: 1px solid black;\n  border-radius: 2px;\n`;\n\nconst ResourceContainer = styled.div`\n  height: 28px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  color: red;\n  \n  .resource-icon {\n    height: 16px;\n    width: 16px;\n    margin-left: 2px;\n    margin-right: 2px;\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { useGame } from \"../../hooks/useGame\";\nimport { useActionOnMe } from \"../../hooks/useActionOnMe\";\nimport { ActionType } from \"../../generatedTypes\";\nimport { PutUpPlantPanel } from \"./PutUpPlantPanel\";\nimport { AuctionPanel } from \"./AuctionPanel\";\nimport { BuyResourcesPanel } from \"./BuyResourcesPanel\";\nimport { BuyCitiesPanel } from \"./BuyCitiesPanel\";\nimport { PowerUpPanel } from \"./PowerUpPanel\";\nimport { WaitingPanel } from \"./WaitingPanel\";\nimport { DiscardPlantPanel } from \"./DiscardPlantPanel\";\nimport { CartsContext } from \"../CartsContext\";\n\ninterface ActionPanelProps {}\n\nexport const ActionPanel: React.FC<ActionPanelProps> = () => {\n  const {\n    state: {\n      info: { actionType },\n      isOver,\n    },\n  } = useGame();\n  const actionOnMe = useActionOnMe(actionType);\n  const carts = React.useContext(CartsContext);\n\n  if (isOver) {\n    return <Container />;\n  }\n\n  if (!actionOnMe && actionType !== ActionType.BID_ON_PLANT) {\n    return (\n      <Container>\n        <WaitingPanel />\n      </Container>\n    );\n  }\n\n  if (actionType === ActionType.PUT_UP_PLANT) {\n    return (\n      <Container>\n        <PutUpPlantPanel plantCart={carts.plantCart} />\n      </Container>\n    );\n  }\n\n  if (actionType === ActionType.BID_ON_PLANT) {\n    return (\n      <Container>\n        <AuctionPanel />\n      </Container>\n    );\n  }\n\n  if (actionType === ActionType.DISCARD_PLANT) {\n    return (\n      <Container>\n        <DiscardPlantPanel discardCart={carts.discardCart} />\n      </Container>\n    );\n  }\n\n  if (actionType === ActionType.BUY_RESOURCES) {\n    return (\n      <Container>\n        <BuyResourcesPanel resourceCart={carts.resourceCart} />\n      </Container>\n    );\n  }\n\n  if (actionType === ActionType.BUY_CITIES) {\n    return (\n      <Container>\n        <BuyCitiesPanel cityCart={carts.cityCart} />\n      </Container>\n    );\n  }\n\n  if (actionType === ActionType.POWER_UP) {\n    return (\n      <Container>\n        <PowerUpPanel powerCart={carts.powerCart} />\n      </Container>\n    );\n  }\n\n  return null;\n};\n\nconst Container = styled.div`\n  height: 208px;\n  width: 100%;\n  background-color: #ddd;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Button } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\n\ninterface SpectatorNotificationProps {\n  gameId: string;\n}\n\nexport const SpectatorNotification: React.FC<SpectatorNotificationProps> = ({ gameId }) => {\n  const [dismissed, setDismissed] = React.useState(false);\n\n  if (dismissed) {\n    return null;\n  }\n  \n  return (\n    <Container>\n      <div>You are viewing this game as a spectator.</div>\n      <div>\n        <Link to={`/login?gameId=${gameId}`}>\n          <Button primary>Login</Button>\n        </Link>\n        <Button onClick={() => setDismissed(true)}>Dismiss</Button>\n      </div>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  position: absolute;\n  background-color: #ccc;\n  z-index: 9001;\n  left: 0;\n  top: 0;\n  width: 240px;\n  height: 150px;\n  padding: 24px;\n  text-align: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n`;","import gql from \"graphql-tag\";\n\nexport const GET_GAME_OVER_DATA_QUERY = gql`\n  query GetGameOverData($id: ID!) {\n    getGameOverData(id: $id) {\n      isOver\n      winOrder {\n        username\n        color\n        money\n        won\n        numPowered\n        numCities\n        spendData {\n          PLANT\n          RESOURCE\n          CITY\n          POWER\n        }\n      }\n    }\n  }\n`;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Modal, Button, Icon } from 'semantic-ui-react';\nimport { useGameOverData } from '../../hooks/useGameOverData';\nimport { Color } from '../../generatedTypes';\nimport { playerColors } from '../../constants';\nimport { CityIcon } from '../cities/CityIcon';\n\nconst messages: Record<string, string> = {\n  USA: 'Game over',\n  Germany: 'Guten tag, Funkenschlag',\n  Italy: 'Bel gioco',\n  Seattle: 'Nice work, Bezos',\n  China: '',\n  ['Northern Europe']: 'Hyv peli',\n  France: 'Bien jou',\n};\n\ninterface GameEndModalProps {\n  mapName: string;\n}\n\nconst sum = (nums: number[]) => nums.reduce((a, b) => a + b, 0);\n\nexport const GameEndModal: React.FC<GameEndModalProps> = ({ mapName }) => {\n  const { loading, error, data } = useGameOverData();\n\n  if (loading || error || !data || !data.getGameOverData) {\n    return null;\n  }\n\n  const { winOrder } = data.getGameOverData;\n  \n  return (\n    <Modal size=\"small\" defaultOpen trigger={<Button icon><Icon name=\"chart line\" /></Button>}>\n      <Container>\n        <Message>{messages[mapName] || 'Game over'}</Message>\n        {winOrder.map(player => (\n          <Player color={player.color}>\n            <PlayerName>\n              {player.won && <Trophy />}\n              {player.username}\n            </PlayerName>\n            <PlayerStats>\n              <CityIcon color=\"black\" empty height={32} number={player.numPowered} strokeWidth={0.2} />\n              <Money>${player.money}</Money>\n              Plants:<Money>${sum(player.spendData.PLANT)}</Money>\n              Resources:<Money>${sum(player.spendData.RESOURCE)}</Money>\n              Cities:<Money>${sum(player.spendData.CITY)}</Money>\n              Earned:<Money>${sum(player.spendData.POWER)}</Money>\n            </PlayerStats>\n          </Player>\n        ))}\n      </Container>\n    </Modal>\n  );\n}\n\nconst Container = styled.div`\n  padding: 24px 40px;\n`;\n\nconst Message = styled.h2``;\n\nconst Player = styled.div<{ color: Color }>`\n  border: 4px solid ${({ color }) => playerColors[color as Color]};\n  border-radius: 4px;\n  padding: 8px;\n  margin-bottom: 4px;\n  overflow: hidden;\n`;\n\nconst PlayerName = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n  font-size: 18px;\n`;\n\nconst PlayerStats = styled.div`\n  display: flex;\n  align-items: center;\n`;\n  \nconst Money = styled.span`\n  margin-left: 8px;\n  font-size: 14px;\n  width: 50px;\n`;\n\nconst Trophy = styled.img.attrs({ src: require('../../assets/trophy.svg') })`\n  height: 14px;\n`;\n","import { useParams } from \"react-router-dom\";\nimport { useQuery } from \"@apollo/client\";\nimport { GetGameOverData, GetGameOverDataVariables } from \"../generatedTypes\";\nimport { GET_GAME_OVER_DATA_QUERY } from \"../graphql/getGameOverDataQuery\";\n\nexport const useGameOverData = () => {\n  const { gameId } = useParams<{ gameId: string }>();\n  return useQuery<GetGameOverData, GetGameOverDataVariables>(GET_GAME_OVER_DATA_QUERY, {\n    variables: { id: gameId }\n  })\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { useGame } from \"../hooks/useGame\";\nimport { Button, Icon, Modal } from \"semantic-ui-react\";\nimport { useQuery } from \"@apollo/client\";\nimport { GetRevenues } from \"../generatedTypes\";\nimport { GET_REVENUES_QUERY } from \"../graphql/getRevenuesQuery\";\nimport { CityIcon, Arrow } from \"./cities/CityIcon\";\nimport { GameEndModal } from \"./game-end/GameEndModal\";\nimport { usePing } from \"../hooks/usePing\";\n\ninterface SummaryBarProps {}\n\nexport const SummaryBar: React.FC<SummaryBarProps> = () => {\n  const { state, era2Start, gameEnd, map } = useGame();\n\n  const phaseText = `${state.info.phase[0]}${state.info.phase\n    .slice(1)\n    .toLowerCase()}`;\n\n  const { data } = useQuery<GetRevenues>(GET_REVENUES_QUERY);\n  const revenues =\n    data && data.getRevenues ? data.getRevenues.slice(0, -1) : [];\n\n  const { isMuted, setMuted } = usePing();\n\n  return (\n    <Container>\n      <div>Era {state.info.era}</div>\n      <div>Turn {state.info.turn}</div>\n      <div>{phaseText} Phase</div>\n      <div>\n        Era 2 start: {era2Start} <CityIcon color=\"black\" height={16} empty />\n      </div>\n      <div>\n        Game end: {gameEnd} <CityIcon color=\"black\" height={16} empty />\n      </div>\n      <div className=\"trigger\">\n        <Button onClick={() => setMuted(!isMuted)} icon>\n          <Icon name={isMuted ? \"mute\" : \"unmute\"} />\n        </Button>\n      </div>\n      <div className=\"trigger\">\n        <Modal\n          trigger={\n            <Button icon>\n              <Icon name=\"dollar\" />\n            </Button>\n          }\n          size=\"small\"\n        >\n          <Modal.Content>\n            <InnerModal>\n              {revenues.map((money, numPowered) => (\n                <PowerInfo key={money}>\n                  <CityIcon\n                    color=\"black\"\n                    empty\n                    height={40}\n                    number={numPowered}\n                    strokeWidth={0.5}\n                  />\n                  <Arrow />\n                  <div>${money}</div>\n                </PowerInfo>\n              ))}\n            </InnerModal>\n          </Modal.Content>\n        </Modal>\n      </div>\n      {state.isOver && (\n        <div className=\"trigger\">\n          <GameEndModal mapName={map.name} />\n        </div>\n      )}\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  position: absolute;\n  display: flex;\n  align-items: center;\n  height: 24px;\n  background-color: #ddd;\n  z-index: 1000;\n  border: 1px solid black;\n\n  > div {\n    height: 100%;\n    padding: 0 8px;\n    border-left: 1px solid black;\n    display: flex;\n    align-items: center;\n\n    svg {\n      margin-left: 2px;\n    }\n  }\n\n  > div:first-child {\n    border-left: none;\n  }\n\n  .trigger {\n    padding: 0;\n\n    button {\n      padding: 0 !important;\n      margin: 0 !important;\n      border-radius: 0 !important;\n      height: 22px;\n      width: 24px;\n    }\n  }\n`;\n\nconst InnerModal = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 312px;\n`;\n\nconst PowerInfo = styled.div`\n  display: flex;\n  align-items: center;\n  font-size: 18px;\n`;\n","import { useEffect, useState } from \"react\";\n\nimport useSound from \"use-sound\";\n\nimport { useActionOnMe } from \"./useActionOnMe\";\nimport { useGame } from \"./useGame\";\nimport boopSfx from \"../assets/sounds/boop.mp3\";\n\nexport const usePing = () => {\n  const [playSound] = useSound(boopSfx);\n  const [isMuted, setMuted] = useState(true);\n\n  const {\n    state: {\n      info: { actionType },\n    },\n  } = useGame();\n  const actionOnMe = useActionOnMe(actionType);\n\n  useEffect(() => {\n    if (!isMuted && actionOnMe) {\n      playSound();\n    }\n  }, [actionOnMe, playSound, isMuted]);\n\n  return { isMuted, setMuted };\n};\n","import gql from \"graphql-tag\";\n\nexport const KEEP_ME_ONLINE_MUTATION = gql`\n  mutation KeepMeOnline {\n    keepMeOnline {\n      id\n    }\n  }\n`;\n","import { useMutation } from \"@apollo/client\";\nimport { useEffect } from \"react\";\nimport { KEEP_ME_ONLINE_MUTATION } from \"../graphql/keepMeOnlineMutation\";\nimport { KeepMeOnline } from \"../generatedTypes\";\n\nexport const useKeepMeOnline = () => {\n  const [keepMeOnline] = useMutation<KeepMeOnline>(KEEP_ME_ONLINE_MUTATION);\n\n  useEffect(() => {\n    const interval = setInterval(keepMeOnline, 5000);\n\n    return () => clearInterval(interval);\n  });\n}\n","import gql from \"graphql-tag\";\nimport { GameStateFragment } from \"./gameStateFragment\";\n\nexport const GAME_STATE_SUBSCRIPTION = gql`\n  subscription GameStateUpdated($gameId: ID!) {\n    gameStateUpdated(gameId: $gameId) {\n      ...GameState\n    }\n  }\n\n  # Fragments\n  ${GameStateFragment}\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { GameMap } from \"./cities/GameMap\";\nimport { ResourceMarket } from \"./resources/ResourceMarket\";\nimport { PlantsTabs } from \"./plants/PlantsTabs\";\nimport { PlayerBox } from \"./PlayerBox\";\nimport { useGame } from \"../hooks/useGame\";\nimport { ActionPanel } from \"./action-panel/ActionPanel\";\nimport { useMe } from \"../hooks/useMe\";\nimport { SpectatorNotification } from \"./auth/SpectatorNotification\";\nimport { SummaryBar } from \"./SummaryBar\";\nimport { useKeepMeOnline } from \"../hooks/useKeepMeOnline\";\nimport { CartsContextProvider } from \"./CartsContext\";\nimport { useGameState } from \"../hooks/useGameState\";\nimport { PlantProvider } from \"../hooks/usePlantGetter\";\n\ninterface GameProps {\n\n}\n\nexport const Game: React.FC<GameProps> = () => {\n  useKeepMeOnline();\n  const me = useMe();\n  const game = useGame();\n  useGameState();\n\n  if (!game) return null;\n  \n  return (\n    <PlantProvider>\n      <CartsContextProvider>\n        <Container>\n          {<SummaryBar />}\n          {!me && <SpectatorNotification gameId={game.id} />}\n          <LeftColumn>\n            <GameMap />\n            <PlayerBoxContainer>\n              {game.state.playerOrder.map((player) => (\n                <PlayerBox\n                  key={player.username}\n                  player={player}\n                />\n              ))}\n            </PlayerBoxContainer>\n          </LeftColumn>\n          <RightColumn>\n            <PlantResourceContainer>\n              <ResourceMarket />\n              <PlantsTabs />\n            </PlantResourceContainer>\n            <ActionPanel />\n          </RightColumn>\n        </Container>\n      </CartsContextProvider>\n    </PlantProvider>\n  );\n}\n\nconst Container = styled.div`\n  height: 100%;\n  display: flex;\n  position: relative;\n`;\n\nconst LeftColumn = styled.div`\n  height: 100%;\n  flex: 1;\n  position: relative;\n`;\n\nconst RightColumn = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst PlantResourceContainer = styled.div`\n  display: flex;\n  flex: 1;\n  border-bottom: 1px solid black;\n`;\n\nconst PlayerBoxContainer = styled.div`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  display: flex;\n  justify-content: flex-end;\n  z-index: 1000;\n  background-color: white;\n`;","import { useParams } from \"react-router-dom\";\nimport { useEffect } from \"react\";\nimport { GAME_STATE_SUBSCRIPTION } from \"../graphql/gameStateUpdatedSubscription\";\nimport { useGameQuery } from \"./useGame\";\nimport { GameStateUpdated, GameStateUpdatedVariables } from \"../generatedTypes\";\n\n// only call this once in the root component\nexport const useGameState = () => {\n  const { gameId } = useParams<{ gameId: string }>();\n\n  const { subscribeToMore } = useGameQuery(gameId);\n  \n  useEffect(() => {\n    subscribeToMore<GameStateUpdated, GameStateUpdatedVariables>({\n      document: GAME_STATE_SUBSCRIPTION,\n      variables: { gameId },\n      updateQuery: (prev, { subscriptionData }) => {\n        console.log(\"UPDATING\", subscriptionData);\n        if (\n          !subscriptionData ||\n          !subscriptionData.data ||\n          !subscriptionData.data.gameStateUpdated\n        ) {\n          return prev;\n        }\n  \n        return {\n          ...prev,\n          getGame: {\n            ...prev.getGame,\n            state: subscriptionData.data.gameStateUpdated,\n          },\n        };\n      }\n    });\n  }, []);\n};\n","import gql from \"graphql-tag\";\n\nexport const CREATE_USER_MUTATION = gql`\n  mutation CreateUser($username: String!, $password: String!, $we: Boolean!) {\n    createUser(username: $username, password: $password, we: $we) {\n      id\n    }\n  }\n`;\n","import gql from \"graphql-tag\";\n\nexport const LOGIN_MUTATION = gql`\n  mutation Login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      token\n    }\n  }\n`;\n","import { useMutation } from \"@apollo/client\";\nimport { Login, LoginVariables } from \"../../generatedTypes\";\nimport { LOGIN_MUTATION } from \"../../graphql/loginMutation\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\n\n\nexport const useLogin = (\n  errorCallback: () => void\n) => {\n  const history = useHistory();\n  const query = new URLSearchParams(useLocation().search);\n  const gameId = query.get(\"gameId\");\n  \n  return useMutation<Login, LoginVariables>(LOGIN_MUTATION, {\n    onError: errorCallback,\n    onCompleted: (data) => {\n      if (!data || !data.login || !data.login.token) {\n        errorCallback();\n      } else {\n        Cookies.set('access_token', data.login.token);\n        const path = gameId ? `/game/${gameId}` : '/';\n        history.push(path);\n      }\n    }\n  });\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Button, Input } from \"semantic-ui-react\";\nimport { useMutation } from \"@apollo/client\";\nimport { CreateUser, CreateUserVariables } from \"../../generatedTypes\";\nimport { CREATE_USER_MUTATION } from \"../../graphql/createUserMutation\";\nimport { useLogin } from \"./useLogin\";\n\ninterface SignupProps {}\n\nexport const Signup: React.FC<SignupProps> = () => {\n  const [username, setUsername] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const [confirmPassword, setConfirmPassword] = React.useState(\"\");\n  const [errored, setErrored] = React.useState(false);\n\n  const [login, { loading: loginLoading }] = useLogin(() => setErrored(true));\n\n  const [signup, { loading: signupLoading }] = useMutation<CreateUser, CreateUserVariables>(CREATE_USER_MUTATION, {\n    onError: () => setErrored(true),\n    onCompleted: (data) => {\n      if (!data || !data.createUser || !data.createUser.id) {\n        setErrored(true);\n      } else {\n        login({\n          variables: {\n            username,\n            password\n          },\n        });\n      }\n    }\n  });\n\n  const handleUsernameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { value } = e.target as HTMLInputElement;\n    setUsername(value);\n    setErrored(false);\n  }\n\n  const handleSubmit = () => {\n    signup({\n      variables: {\n        username,\n        password,\n        we: false\n      }\n    });\n  };\n\n  const loading = loginLoading || signupLoading;\n  \n  return (\n    <Container>\n      <Box>\n        <Input\n          placeholder=\"Username\"\n          value={username}\n          onChange={handleUsernameChange}\n          error={errored}\n          disabled={loading}\n        />\n        <Input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n          disabled={loading}\n        />\n        <Input\n          type=\"password\"\n          placeholder=\"Confirm Password\"\n          value={confirmPassword}\n          onChange={e => setConfirmPassword(e.target.value)}\n          disabled={loading}\n        />\n        <Disclaimer>Don't use your normal password, this shit ain't secure.</Disclaimer>\n        <Button\n          primary\n          loading={loading}\n          disabled={!username || !password || password !== confirmPassword || errored}\n          onClick={handleSubmit}\n        >Signup</Button>\n      </Box>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: calc(100% - 72px);\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Box = styled.div`\n  height: 300px;\n  width: 250px;\n  border: 1px solid black;\n  border-radius: 5px;\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  padding-top: 24px;\n\n  .ui.input {\n    margin-bottom: 12px;\n  }\n\n  button {\n    position: absolute !important;\n    bottom: 24px;\n  }\n`;\n\nconst Disclaimer = styled.div`\n  font-size: 8px;\n`;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Button, Input } from \"semantic-ui-react\";\nimport { useLogin } from \"./useLogin\";\nimport { Link } from \"react-router-dom\";\n\ninterface LoginFormProps {}\n\nexport const LoginForm: React.FC<LoginFormProps> = () => {\n  const [username, setUsername] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const [errored, setErrored] = React.useState(false);\n\n  const [login, { loading }] = useLogin(() => setErrored(true));\n\n  const handleUsernameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { value } = e.target as HTMLInputElement;\n    setUsername(value);\n    setErrored(false);\n  }\n\n  const handleSubmit = () => {\n    login({\n      variables: {\n        username,\n        password,\n      }\n    });\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\" && username && password) {\n      handleSubmit();\n    }\n  }\n  \n  return (\n    <Container>\n      <Box>\n        <Input\n          placeholder=\"Username\"\n          value={username}\n          onChange={handleUsernameChange}\n          error={errored}\n        />\n        <Input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n          onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>) => handleKeyDown(e)}\n          error={errored}\n        />\n        <ButtonGroup>\n          <Button\n            primary\n            loading={loading}\n            disabled={!username || !password || errored}\n            onClick={handleSubmit}\n          >Login</Button>\n          <Link to=\"/signup\">\n            <Button secondary>Signup</Button>\n          </Link>\n        </ButtonGroup>\n      </Box>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: calc(100% - 72px);\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Box = styled.div`\n  height: 300px;\n  width: 250px;\n  border: 1px solid black;\n  border-radius: 5px;\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  padding-top: 24px;\n\n  .ui.input {\n    margin-bottom: 12px;\n  }\n`;\n\nconst ButtonGroup = styled.div`\n  position: absolute;\n  bottom: 24px;\n  display: flex;\n  justify-content: center;\n\n  button {\n    margin-left: 8px;\n    margin-right: 0;\n  }\n\n  > button:first-child {\n    margin-right: 8px;\n    margin-left: 0;\n  }\n`;","import gql from \"graphql-tag\";\n\nexport const GET_ONLINE_USERNAMES_QUERY = gql`\n  query GetOnlineUsernames {\n    getOnlineUsernames\n  }\n`;\n","import gql from \"graphql-tag\";\n\nexport const CREATE_GAME_MUTATION = gql`\n  mutation CreateGame($mapName: String!, $usernames: [String!]! $name: String) {\n    createGame(mapName: $mapName, usernames: $usernames, name: $name)\n  }\n`;\n","import gql from \"graphql-tag\";\n\nexport const GET_MY_RECENT_GAMES_QUERY = gql`\n  query GetMyRecentGames {\n    getMyRecentGames {\n      id\n      name\n      players\n    }\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Segment, Header, Input, Icon, Button, Card, Dropdown } from \"semantic-ui-react\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { GET_ONLINE_USERNAMES_QUERY } from \"../../graphql/getOnlineUsernamesQuery\";\nimport { GetOnlineUsernames, GetCurrentUser, CreateGame, CreateGameVariables, GetMyRecentGames } from \"../../generatedTypes\";\nimport { GET_CURRENT_USER_QUERY } from \"../../graphql/getCurrentUser\";\nimport { CREATE_GAME_MUTATION } from \"../../graphql/createGameMutation\";\nimport { useHistory } from \"react-router\";\nimport { GET_MY_RECENT_GAMES_QUERY } from \"../../graphql/getMyRecentGamesQuery\";\nimport { Link } from \"react-router-dom\";\n\nexport const Home: React.FC = () => {\n  const history = useHistory();\n  const { data: currentUserData } = useQuery<GetCurrentUser>(GET_CURRENT_USER_QUERY);\n  const { data: recentGamesData } = useQuery<GetMyRecentGames>(GET_MY_RECENT_GAMES_QUERY, { pollInterval: 2000 });\n  const myName = currentUserData && currentUserData.getCurrentUser && currentUserData.getCurrentUser.username;\n  \n  const { data, loading } = useQuery<GetOnlineUsernames>(GET_ONLINE_USERNAMES_QUERY, {\n    pollInterval: 2000\n  });\n\n  const [startGame, { loading: gameLoading }] = useMutation<CreateGame, CreateGameVariables>(CREATE_GAME_MUTATION, {\n    onCompleted: (data) => {\n      if (data && data.createGame) {\n        history.push(`/game/${data.createGame}`);\n      }\n    }\n  });\n\n  const [gameName, setGameName] = React.useState(\"\");\n  const [gamePlayers, setGamePlayers] = React.useState([]);\n\n  React.useEffect(() => {\n    if (myName && !gamePlayers.includes(myName)) {\n      setGamePlayers([myName, ...gamePlayers]);\n    }\n  }, [myName]);\n\n  const addPlayer = (playerName: string) => {\n    if (!gamePlayers.includes(playerName)) {\n      setGamePlayers([...gamePlayers, playerName]);\n    }\n  };\n\n  const removePlayer = (playerName: string) => {\n    setGamePlayers(gamePlayers.filter((name) => name !== playerName));\n  };\n\n  const [selectedMap, setSelectedMap] = React.useState(\"USA\");\n\n  const mapDropdownOptions = [\"USA\", \"Germany\", \"Italy\", \"Seattle\", \"Northern Europe\", \"China\", \"France\"]\n    .map(mapName => ({\n      key: mapName,\n      value: mapName,\n      text: mapName\n    }));\n\n  const handleSubmitStartGame = () => {\n    startGame({\n      variables: {\n        name: gameName,\n        usernames: gamePlayers,\n        mapName: selectedMap\n      }\n    })\n  }\n\n  return (\n    <Container>\n      <Segment.Group horizontal>\n        <Segment raised>\n          <Header>Your Recent Games</Header>\n          {recentGamesData && recentGamesData.getMyRecentGames && recentGamesData.getMyRecentGames.map((game) => (\n            <Link to={`/game/${game.id}`}>\n              <Card>\n                <Card.Content>\n                  <Card.Description>{game.name || `Game #${game.id}`}</Card.Description>\n                  <Card.Meta>{game.players.join(\", \")}</Card.Meta>\n                </Card.Content>\n              </Card>\n            </Link>\n          ))}\n        </Segment>\n        {myName && (\n          <Segment raised>\n            <Header>Start a Game</Header>\n            <Input\n              placeholder=\"Give it a name\"\n              value={gameName}\n              onChange={e => setGameName(e.target.value)}\n            />\n            <Header size=\"small\">Map</Header>\n            <Dropdown\n              selection\n              options={mapDropdownOptions}\n              defaultValue={selectedMap}\n              onChange={(event, data) => setSelectedMap(data.value as string)}\n            />\n            <Header size=\"small\">Players</Header>\n            {gamePlayers.map((playerName) => (\n              <Buddy key={playerName}>\n                {playerName}\n                {playerName !== myName && <Icon color=\"red\" name=\"remove circle\" onClick={() => removePlayer(playerName)} />}\n              </Buddy>\n            ))}\n            <Button.Group>\n              <Button\n                primary\n                loading={gameLoading}\n                disabled={gamePlayers.length < 2 || gamePlayers.length > 6}\n                onClick={handleSubmitStartGame}\n              >Start it!</Button>\n            </Button.Group>\n          </Segment>\n        )}\n        <Segment raised loading={loading}>\n          <Header>Buddy List</Header>\n          {data && data.getOnlineUsernames && data.getOnlineUsernames.map((username) => (\n            <Buddy key={username}>\n              {username}\n              {username !== myName && <Icon color=\"green\" name=\"add circle\" onClick={() => addPlayer(username)} />}\n            </Buddy>\n          ))}\n        </Segment>\n      </Segment.Group>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: calc(100% - 72px);\n  width: 100%;\n  padding: 0 1rem;\n\n  .ui.buttons {\n    margin-top: 100px !important;\n  }\n`;\n\nconst Buddy = styled.div`\n  display: flex;\n  align-items: center;\n\n  i {\n    margin-left: 4px !important;\n  }\n`;\n","import React from \"react\";\nimport { Menu, Header } from \"semantic-ui-react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { useQuery } from \"@apollo/client\";\nimport { GetCurrentUser } from \"../../generatedTypes\";\nimport { GET_CURRENT_USER_QUERY } from \"../../graphql/getCurrentUser\";\nimport { useKeepMeOnline } from \"../../hooks/useKeepMeOnline\";\nimport Cookies from \"js-cookie\";\n\nexport const Navbar: React.FC = () => {\n  useKeepMeOnline();\n  const history = useHistory();\n  \n  const { loading, error, data } = useQuery<GetCurrentUser>(GET_CURRENT_USER_QUERY);\n\n  const isLoggedIn = !loading && !error && data && data.getCurrentUser;\n\n  const logout = () => {\n    Cookies.remove(\"access_token\");\n    history.push(\"/login\");\n    window.location.reload();\n  }\n  \n  return (\n    <Menu>\n      <Menu.Item>\n        <Link to=\"/\">\n          <Header>Terrawatts 2.0</Header>\n        </Link>\n      </Menu.Item>\n      <Menu.Menu position=\"right\">\n        {isLoggedIn ? (\n          <>\n            <Menu.Item>\n              <Link to=\"/profile\">\n                {data.getCurrentUser.username}\n              </Link>\n            </Menu.Item>\n            <Menu.Item onClick={logout}>Logout</Menu.Item>\n          </>\n        ) : (\n          <>\n          <Menu.Item>\n            <Link to=\"/login\">\n              Login\n            </Link>\n          </Menu.Item>\n          <Menu.Item>\n            <Link to=\"/signup\">\n              Signup\n            </Link>\n          </Menu.Item>\n          </>\n        )}\n      </Menu.Menu>\n    </Menu>\n  );\n}\n","import gql from \"graphql-tag\";\n\nexport const SET_USER_PREFERENCES_MUTATION = gql`\n  mutation SetUserPreferences($preferredColor: Color, $we: Boolean) {\n    setUserPreferences(preferredColor: $preferredColor, we: $we) {\n      id\n      preferredColor\n    }\n  }\n`;\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { GetCurrentUser, Color, SetUserPreferences, SetUserPreferencesVariables } from \"../../generatedTypes\";\nimport { GET_CURRENT_USER_QUERY } from \"../../graphql/getCurrentUser\";\nimport { Header, Dropdown, Input, Button } from \"semantic-ui-react\";\nimport { playerColors } from \"../../constants\";\nimport { SET_USER_PREFERENCES_MUTATION } from \"../../graphql/setUserPreferencesMutation\";\nimport { useHistory } from \"react-router\";\n\ninterface ProfileProps {}\n\nexport const Profile: React.FC<ProfileProps> = () => {\n  const history = useHistory();\n  const { data } = useQuery<GetCurrentUser>(GET_CURRENT_USER_QUERY);\n  const [saveUserPreferences, { loading }] = useMutation<SetUserPreferences, SetUserPreferencesVariables>(SET_USER_PREFERENCES_MUTATION, {\n    onCompleted: () => history.push(\"/\")\n  });\n  \n  const [selectedColor, setSelectedColor] = React.useState(data.getCurrentUser.preferredColor);\n  const [energy, setEnergy] = React.useState(\"\");\n\n  const dropdownOptions = [Color.RED, Color.YELLOW, Color.GREEN, Color.PURPLE, Color.BLACK]\n    .map(color => ({\n      key: color,\n      value: color,\n      selected: color === selectedColor,\n      text: color.toLowerCase()\n    }));\n\n  const handleSubmit = () => {\n    saveUserPreferences({\n      variables: {\n        preferredColor: selectedColor,\n        we: energy.includes(\"weed\")\n      }\n    })\n  }\n  \n  return (\n    <Container>\n      <Box>\n        <Header>{data.getCurrentUser.username}'s Profile</Header>\n        <hr />\n        <Dropdown\n          placeholder=\"Favorite color\"\n          clearable\n          selection\n          options={dropdownOptions}\n          defaultValue={selectedColor}\n          onChange={(event, data) => setSelectedColor(data.value as Color)}\n        >\n        </Dropdown>\n        <Input\n          placeholder=\"Favorite type of energy\"\n          value={energy}\n          onChange={e => setEnergy(e.target.value)}\n        />\n        <Button loading={loading} onClick={handleSubmit} primary>Save</Button>\n      </Box>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: calc(100% - 72px);\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Box = styled.div`\n  height: 300px;\n  width: 350px;\n  border: 1px solid black;\n  border-radius: 5px;\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  padding: 24px 0;\n\n  input {\n    margin-top: 12px !important;\n  }\n\n  button {\n    margin-top: auto !important;\n  }\n`;\n","import gql from \"graphql-tag\";\n\nexport const MAP_QUERY = gql`\n  query FetchMap($mapName: String!, $regions: [Int!]) {\n    fetchMap(mapName: $mapName, regions: $regions) {\n      id\n      name\n      cities {\n        id\n        name\n        lat\n        lng\n        region\n      }\n      connections {\n        id\n        cost\n        cities {\n          id\n        }\n      }\n    }\n  }\n`;\n","import gql from \"graphql-tag\";\n\nexport const SAVE_MAP_MUTATION = gql`\n  mutation SaveMap($mapInput: MapInput!) {\n    saveMap(mapInput: $mapInput) {\n      id\n      name\n      cities {\n        id\n        name\n        lat\n        lng\n        region\n      }\n      connections {\n        id\n        cost\n        cities {\n          id\n        }\n      }\n    }\n  }\n`;\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { Button } from \"semantic-ui-react\";\nimport styled from \"styled-components\";\nimport { Map as ReactLeaflet, TileLayer } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\nimport { MAP_QUERY } from \"../../graphql/mapQuery\";\nimport { FetchMap, FetchMapVariables, FetchMap_fetchMap_cities, FetchMap_fetchMap, CityInput, SaveMap, SaveMapVariables, MapInput } from \"../../generatedTypes\";\nimport { getMapConfig } from \"./mapConfig\";\nimport { CityMarker } from \"./CityMarker\";\nimport { Connections } from \"./Connections\";\nimport { SAVE_MAP_MUTATION } from \"../../graphql/saveMapMutation\";\nimport { tileUrl } from \"./tileUrl\";\n\nconst MapEditorBase: React.FC<{ map: FetchMap_fetchMap }> = ({ map }) => {\n  const [state, setState] = React.useState(map);\n  const [isSaved, setIsSaved] = React.useState(true);\n\n  const [saveMap, { loading }] = useMutation<SaveMap, SaveMapVariables>(SAVE_MAP_MUTATION, {\n    onCompleted: () => setIsSaved(true),\n    onError: (error) => toast.error(error.message),\n  });\n  \n  const cityLookup = state.cities\n    .reduce<Record<string, FetchMap_fetchMap_cities>>((acc, city) => {\n      acc[city.id] = city;\n      return acc;\n    }, {});\n\n  const { center, minZoom, maxZoom, maxBounds } = getMapConfig(state.name);\n\n  const submitSave = () => {\n    const changes = map.cities\n      .filter(city => {\n        const localCity = cityLookup[city.id];\n        return localCity.lat !== city.lat || localCity.lng !== city.lng;\n      })\n      .map(city => cityLookup[city.id]);\n    \n    const mapInput: MapInput = {\n      id: state.id,\n      name: state.name,\n      cities: changes.map(({ id, lat, lng }) => ({ id, lat, lng })),\n    };\n\n    saveMap({ variables: { mapInput } });\n  };\n\n  const setLatLng = (cityInput: CityInput) => {\n    setState({\n      ...state,\n      cities: state.cities.map(city => {\n        if (cityInput.id === city.id) {\n          return { ...city, lat: cityInput.lat, lng: cityInput.lng };\n        }\n        return city;\n      })\n    });\n    setIsSaved(false);\n  }\n\n  return (\n    <> \n      {!isSaved && (\n        <TopRight>\n          <Button primary loading={loading} onClick={submitSave}>\n            Save\n          </Button>\n        </TopRight>\n      )}\n      <ReactLeaflet\n        center={center}\n        zoom={minZoom}\n        minZoom={minZoom}\n        maxZoom={maxZoom}\n        maxBounds={maxBounds}\n        attributionControl={false}\n        zoomControl={false}\n        zoomSnap={0.25}\n        zoomDelta={0.25}\n      >\n        <TileLayer url={tileUrl} />\n        {state.cities.map((city) => {\n          return (\n            <CityMarker\n              key={city.id}\n              city={city}\n              hasNuclearPower={state.name === 'Northern Europe' && city.region > 2}\n              isDraggable\n              onDragEnd={({ lat, lng }) => setLatLng({ id: city.id, lat, lng })}\n            />\n          )\n        })}\n        <Connections cityLookup={cityLookup} connections={map.connections} />\n      </ReactLeaflet>\n    </>\n  )\n}\n\nexport const MapEditor: React.FC = () => {\n  const { mapName } = useParams<{ mapName: string }>();\n  const { data } = useQuery<FetchMap, FetchMapVariables>(MAP_QUERY, {\n    variables: { mapName }\n  });\n  const map = data && data.fetchMap;\n  return (\n    <Container>\n      {map ? <MapEditorBase map={map} /> : \"Loading...\"}\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  height: 100%;\n\n  > div {\n    height: 100%;\n  }\n\n  .leaflet-div-icon {\n    background: none !important;\n    border: none !important;\n  }\n`;\n\nconst TopRight = styled.div`\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  z-index: 1000;\n`;","import React from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { Game } from \"./components/Game\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport \"./App.css\";\nimport { Signup } from \"./components/auth/Signup\";\nimport { LoginForm } from \"./components/auth/Login\";\nimport { Home } from \"./components/home/Home\";\nimport { Navbar } from \"./components/home/Navbar\";\nimport { Profile } from \"./components/home/Profile\";\nimport { useQuery } from \"@apollo/client\";\nimport { GetCurrentUser } from \"./generatedTypes\";\nimport { GET_CURRENT_USER_QUERY } from \"./graphql/getCurrentUser\";\nimport { MapEditor } from \"./components/cities/MapEditor\";\n\nexport const App: React.FC = () => {\n  const { loading } = useQuery<GetCurrentUser>(GET_CURRENT_USER_QUERY);\n\n  if (loading) {\n    return null;\n  }\n  \n  return (\n    <Container>\n      <ToastContainer />\n      <Router>\n        <Route exact path={[\"/signup\", \"/login\", \"/profile\", \"/\"]} children={<Navbar />}/>\n        <Switch>\n          <Route exact path=\"/signup\" children={<Signup />} />\n          <Route exact path=\"/login\" children={<LoginForm />} />\n          <Route exact path=\"/game/:gameId\" children={<Game />} />\n          <Route exact path=\"/map-editor/:mapName\" children={<MapEditor />} />\n          {/* <Route path=\"/all-plants\" children={<AllPlants />}></Route> */}\n          <Route exact path=\"/profile\" children={<Profile />} />\n          <Route exact path=\"/\" children={<Home />} />\n          <Route children={() => <div>Not found, TODO</div>} />\n        </Switch>\n      </Router>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: 100vh;\n  width: 100vw;\n`;\n","import { WebSocketLink } from '@apollo/client/link/ws';\nimport { getMainDefinition } from '@apollo/client/utilities';\nimport { ApolloClient, split, HttpLink, InMemoryCache } from '@apollo/client';\nimport { setContext } from '@apollo/client/link/context';\nimport Cookies from \"js-cookie\";\n\n// const isProd = process.env.NODE_ENV === \"production\";\nconst isProd = true; // TEMP\n\nconst url = isProd ? \"terrawatts2-server.fly.dev\" : \"localhost:4000\"\n\n// Create an http link:\nconst httpLink = new HttpLink({\n  uri: `https://${url}`,\n  credentials: 'include'\n});\n\n// Create a WebSocket link:\nconst wsLink = new WebSocketLink({\n  uri: `wss://${url}/graphql`,\n  options: {\n    reconnect: true\n  }\n});\n\nconst authLink = setContext((_, { headers }) => {\n  const token = Cookies.get('access_token');\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : \"\",\n    }\n  }\n});\n\n// using the ability to split links, you can send data to each link\n// depending on what kind of operation is being sent\nconst link = split(\n  // split based on operation type\n  ({ query }) => {\n    const definition = getMainDefinition(query);\n    return (\n      definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n    );\n  },\n  wsLink,\n  authLink.concat(httpLink),\n);\n\nexport const client = new ApolloClient({\n  link,\n  cache: new InMemoryCache(),\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ApolloProvider } from '@apollo/client';\nimport './index.css';\nimport  { App } from './App';\nimport { client } from './client';\n\nReactDOM.render((\n  <ApolloProvider client={client}>\n    <App />\n  </ApolloProvider>\n), document.getElementById('root'));\n\n"],"sourceRoot":""}